

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>resistics.ioHandlers.dataReaderPhoenix &mdash; resistics 0.0.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css\custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> resistics
          

          
            
            <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../donate.html">Donate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">resistics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>resistics.ioHandlers.dataReaderPhoenix</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for resistics.ioHandlers.dataReaderPhoenix</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">struct</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>

<span class="c1"># import from package</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataReader</span> <span class="k">import</span> <span class="n">DataReader</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataWriterInternal</span> <span class="k">import</span> <span class="n">DataWriterInternal</span>
<span class="kn">from</span> <span class="nn">resistics.dataObjects.timeData</span> <span class="k">import</span> <span class="n">TimeData</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsChecks</span> <span class="k">import</span> <span class="n">consistentChans</span><span class="p">,</span> <span class="n">isMagnetic</span><span class="p">,</span> <span class="n">isElectric</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsClean</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">removeZeros</span><span class="p">,</span>
    <span class="n">removeZerosSingle</span><span class="p">,</span>
    <span class="n">removeNansSingle</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsMath</span> <span class="k">import</span> <span class="n">intdiv</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsPrint</span> <span class="k">import</span> <span class="n">blockPrint</span>


<div class="viewcode-block" id="DataReaderPhoenix"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix">[docs]</a><span class="k">class</span> <span class="nc">DataReaderPhoenix</span><span class="p">(</span><span class="n">DataReader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Data reader for Phoenix data</span>

<span class="sd">    The Phoenix data and recording format is different and does not nicely fit with the way resistics tries to model data.</span>
<span class="sd">    </span>
<span class="sd">    There are three frequencies recorded concurrently (e.g. 2400Hz, 150Hz, 15Hz). The lowest sampling frequency is continuous whilst the others record data files at regular intervals. There is no issue with the continous sampling frequency. </span>
<span class="sd">    </span>
<span class="sd">    However, as resistics separates out data into continuous recordings, the consistent gaps for the higher frequencies will lead to lots of small data folders if converted to internal data format.</span>

<span class="sd">    This class returns the lowest frequency recording (the continuous one) when time series data is requested. However, higher frequencies can be converted to the internal data format using the methods available here.</span>

<span class="sd">    Warnings</span>
<span class="sd">    --------</span>
<span class="sd">    The appropriate scaling for Phoenix data to return field units has not yet been verified.</span>

<span class="sd">    It is not actually recommended to reformat the high frequency recordings as this will lead to potentially thousands of data folders. There is currently no straight-forward way to support the high-frequency Phoenix recordings.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    recChannels : Dict</span>
<span class="sd">        Channels in each data file</span>
<span class="sd">    dtype : np.float32</span>
<span class="sd">        The data type</span>
<span class="sd">    numHeaderFiles : int</span>
<span class="sd">        The number of header files</span>
<span class="sd">    numDataFiles : int</span>
<span class="sd">        The number of data files</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    setParameters()</span>
<span class="sd">        Set data reader parameters for Phoenix files</span>
<span class="sd">    getSamplesRatesTS()</span>
<span class="sd">        Get the sampling frequencies of the time series data</span>
<span class="sd">    getNumberSamplesTS()</span>
<span class="sd">        Get the number of samples for each time series file</span>
<span class="sd">    getUnscaledSamples(**kwargs)</span>
<span class="sd">        Get raw data from data file</span>
<span class="sd">    getRecordsForSamples(startSample, endSample)</span>
<span class="sd">        Get the records to read for a sample range</span>
<span class="sd">    readTag(dataFile)</span>
<span class="sd">        Read the tag from a data file</span>
<span class="sd">    readRecord(dataFile, numChans, numScans)</span>
<span class="sd">        Read numScans from a record</span>
<span class="sd">    twosComplement(dataBytes)</span>
<span class="sd">        Read the two&#39;s complement data from the file</span>
<span class="sd">    getPhysicalSamples(**kwargs)</span>
<span class="sd">        Get data scaled to physical values</span>
<span class="sd">    chanDefaults()</span>
<span class="sd">        Get defaults for channel headers</span>
<span class="sd">    readHeader()</span>
<span class="sd">        Read header file</span>
<span class="sd">    readTable()</span>
<span class="sd">        Read table file</span>
<span class="sd">    removeControl(inBytes)</span>
<span class="sd">        Remove control characters from a byte string</span>
<span class="sd">    headersFromTable(tableData)</span>
<span class="sd">        Parse the information in the table file to get headers</span>
<span class="sd">    getDates(tableData)</span>
<span class="sd">        Get recording dates (start and end time)</span>
<span class="sd">    checkSamples()</span>
<span class="sd">        Check the number of samples for all the timeseries (ts) files</span>
<span class="sd">    reformatHigh(path, **kwargs)</span>
<span class="sd">        Write out high frequency time series in internal format</span>
<span class="sd">    reformatContinuous(path)</span>
<span class="sd">        Write out the continuous time series in internal format</span>
<span class="sd">    reformat(path)</span>
<span class="sd">        Write out all recorded time series to internal format</span>
<span class="sd">    printDataFileList()  </span>
<span class="sd">        Information about the data files as a list of strings</span>
<span class="sd">    printDataFileInfo()</span>
<span class="sd">        Print a list of the data files</span>
<span class="sd">    printTableFileList()</span>
<span class="sd">        Information about the table file as a list of strings</span>
<span class="sd">    printTableFileInfo()</span>
<span class="sd">        Print table file info</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Phoenix data is stored in 3 bytes two&#39;s-complement format.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DataReaderPhoenix.setParameters"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.setParameters">[docs]</a>    <span class="k">def</span> <span class="nf">setParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set data reader parameters for Phoenix files</span>
<span class="sd">        </span>
<span class="sd">        Phoenix time series data is not contiguous in the file and is separated into records. There are multiple time series data files, one for the continuous recording and two others for the other frequencies. Therefore, there are a few other class variables defined here than in the parent DataReader class.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># get a list of the header and data files in the folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">headerF</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataPath</span><span class="p">,</span> <span class="s2">&quot;*.TBL&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataF</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataPath</span><span class="p">,</span> <span class="s2">&quot;*.TS*&quot;</span><span class="p">))</span>
        <span class="c1"># set the sample byte size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># two&#39;s complement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tagByteSize</span> <span class="o">=</span> <span class="mi">32</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="nb">int</span>
        <span class="c1"># there will be multiple TS files in here</span>
        <span class="c1"># need to figure out</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numHeaderFiles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">headerF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numDataFiles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.getSamplesRatesTS"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.getSamplesRatesTS">[docs]</a>    <span class="k">def</span> <span class="nf">getSamplesRatesTS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the sampling frequencies of the time series data</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict</span>
<span class="sd">            Dictionary with the time series file number as keys and their sampling frequencies in Hz as values</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">info</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">sr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsSampleFreqs</span><span class="p">):</span>
            <span class="n">info</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">sr</span>
        <span class="k">return</span> <span class="n">info</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.getNumberSamplesTS"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.getNumberSamplesTS">[docs]</a>    <span class="k">def</span> <span class="nf">getNumberSamplesTS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the number of samples for each time series file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict</span>
<span class="sd">            Dictionary with the time series file number as keys and their number of samples as values</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">info</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">ns</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNumSamples</span><span class="p">):</span>
            <span class="n">info</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">ns</span>
        <span class="k">return</span> <span class="n">info</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.getUnscaledSamples"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.getUnscaledSamples">[docs]</a>    <span class="k">def</span> <span class="nf">getUnscaledSamples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeData</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get raw data from data file</span>

<span class="sd">        Only returns the continuous data. The continuous data is in 24 bit two&#39;s complement (3 bytes) format and is read in using struct as this is not supported by numpy.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        chans : List[str], optional</span>
<span class="sd">            List of channels to return if not all are required</span>
<span class="sd">        startSample : int, optional</span>
<span class="sd">            First sample to return</span>
<span class="sd">        endSample : int, optional</span>
<span class="sd">            Last sample to return</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        TimeData</span>
<span class="sd">            Time data object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># initialise chans, startSample and endSample with the whole dataset</span>
        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseGetDataKeywords</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># get the files to read and the samples to take from them, in the correct order</span>
        <span class="n">recordsToRead</span><span class="p">,</span> <span class="n">samplesToRead</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRecordsForSamples</span><span class="p">(</span>
            <span class="n">options</span><span class="p">[</span><span class="s2">&quot;startSample&quot;</span><span class="p">],</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;endSample&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">numSamples</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;endSample&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;startSample&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="c1"># set up the dictionary to hold the data</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;chans&quot;</span><span class="p">]:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">numSamples</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

        <span class="c1"># open the file</span>
        <span class="n">dFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousF</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>

        <span class="c1"># loop through chans and get data</span>
        <span class="n">sampleCounter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">record</span><span class="p">,</span> <span class="n">sToRead</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">recordsToRead</span><span class="p">,</span> <span class="n">samplesToRead</span><span class="p">):</span>
            <span class="c1"># number of samples to read in record</span>
            <span class="n">dSamples</span> <span class="o">=</span> <span class="n">sToRead</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">sToRead</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="c1"># find the byte read start and byte read end</span>
            <span class="n">recordByteStart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordBytes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
            <span class="n">recordSampleStart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStarts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
            <span class="c1"># find the offset on the readFrom bytes</span>
            <span class="c1"># now recall, each sample is recorded as a scan (all channels recorded at the same time)</span>
            <span class="c1"># so multiply by number of channels to get the number of bytes to read</span>
            <span class="n">byteReadStart</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">recordByteStart</span>
                <span class="o">+</span> <span class="p">(</span><span class="n">sToRead</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">recordSampleStart</span><span class="p">)</span>
                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span>
                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">bytesToRead</span> <span class="o">=</span> <span class="n">dSamples</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span>
            <span class="c1"># read the data - numpy does not support 24 bit two&#39;s complement (3 bytes) - hence use struct</span>
            <span class="n">dFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">byteReadStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># seek to start byte from start of file</span>
            <span class="n">dataBytes</span> <span class="o">=</span> <span class="n">dFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">bytesToRead</span><span class="p">)</span>
            <span class="n">dataRead</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">twosComplement</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">)</span>
            <span class="c1"># now need to unpack this</span>
            <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;chans&quot;</span><span class="p">]:</span>
                <span class="c1"># check to make sure channel exists</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">checkChan</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span>
                <span class="c1"># get the channel index - the chanIndex should give the right order in the data file</span>
                <span class="c1"># as it is the same order as in the header file</span>
                <span class="n">chanIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chanMap</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span>
                <span class="c1"># now populate the channel data appropriately</span>
                <span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">][</span><span class="n">sampleCounter</span> <span class="p">:</span> <span class="n">sampleCounter</span> <span class="o">+</span> <span class="n">dSamples</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataRead</span><span class="p">[</span>
                    <span class="n">chanIndex</span> <span class="p">:</span> <span class="n">dSamples</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span>
                <span class="p">]</span>
            <span class="c1"># increment sample counter</span>
            <span class="n">sampleCounter</span> <span class="o">=</span> <span class="n">sampleCounter</span> <span class="o">+</span> <span class="n">dSamples</span>  <span class="c1"># get ready for the next data read</span>
        <span class="c1"># close file</span>
        <span class="n">dFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="c1"># return data</span>
        <span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample2time</span><span class="p">(</span>
            <span class="n">options</span><span class="p">[</span><span class="s2">&quot;startSample&quot;</span><span class="p">],</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;endSample&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;Unscaled data </span><span class="si">{}</span><span class="s2"> to </span><span class="si">{}</span><span class="s2"> read in from measurement </span><span class="si">{}</span><span class="s2">, samples </span><span class="si">{}</span><span class="s2"> to </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">startTime</span><span class="p">,</span>
            <span class="n">stopTime</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataPath</span><span class="p">,</span>
            <span class="n">options</span><span class="p">[</span><span class="s2">&quot;startSample&quot;</span><span class="p">],</span>
            <span class="n">options</span><span class="p">[</span><span class="s2">&quot;endSample&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">TimeData</span><span class="p">(</span>
            <span class="n">sampleFreq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getSampleFreq</span><span class="p">(),</span>
            <span class="n">startTime</span><span class="o">=</span><span class="n">startTime</span><span class="p">,</span>
            <span class="n">stopTime</span><span class="o">=</span><span class="n">stopTime</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">comments</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.getRecordsForSamples"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.getRecordsForSamples">[docs]</a>    <span class="k">def</span> <span class="nf">getRecordsForSamples</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">startSample</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">endSample</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="n">List</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the records to read for a sample range</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        startSample : int</span>
<span class="sd">            The starting sample of the range</span>
<span class="sd">        endSample : int</span>
<span class="sd">            The ending sample of the range</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        recordsToRead : List</span>
<span class="sd">            The records to read from the time series data files</span>
<span class="sd">        samplesToRead : List</span>
<span class="sd">            The samples to read from each record</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">recordsToRead</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">samplesToRead</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">record</span><span class="p">,</span> <span class="n">timeStart</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordStarts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">]):</span>
            <span class="n">recordStartSamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStarts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
            <span class="n">recordEndSamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStops</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">recordStartSamp</span> <span class="o">&gt;</span> <span class="n">endSample</span> <span class="ow">or</span> <span class="n">recordEndSamp</span> <span class="o">&lt;</span> <span class="n">startSample</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># nothing to read from this file</span>
            <span class="c1"># in this case, there is some overlap with the samples to read</span>
            <span class="n">recordsToRead</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="n">readFrom</span> <span class="o">=</span> <span class="n">recordStartSamp</span>  <span class="c1"># i.e. the first sample in the datafile</span>
            <span class="n">readTo</span> <span class="o">=</span> <span class="n">recordEndSamp</span>  <span class="c1"># this the last sample in the file</span>
            <span class="k">if</span> <span class="n">recordStartSamp</span> <span class="o">&lt;</span> <span class="n">startSample</span><span class="p">:</span>
                <span class="n">readFrom</span> <span class="o">=</span> <span class="n">startSample</span>
            <span class="k">if</span> <span class="n">recordEndSamp</span> <span class="o">&gt;</span> <span class="n">endSample</span><span class="p">:</span>
                <span class="n">readTo</span> <span class="o">=</span> <span class="n">endSample</span>
            <span class="c1"># this is an inclusive number readFrom to readTo including readTo</span>
            <span class="n">samplesToRead</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">readFrom</span><span class="p">,</span> <span class="n">readTo</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">recordsToRead</span><span class="p">,</span> <span class="n">samplesToRead</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.readTag"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.readTag">[docs]</a>    <span class="k">def</span> <span class="nf">readTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataFile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Read the tag from a data file</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataFile : file handle</span>
<span class="sd">            File handle of the data file</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numScans : List</span>
<span class="sd">            Number of scans in the tag</span>
<span class="sd">        numChans : List</span>
<span class="sd">            Number of channels in the tag</span>
<span class="sd">        dateString : str</span>
<span class="sd">            The dataString of the tag</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">second</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">minute</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">hour</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">day</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">month</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">year</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dayOfWeek</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">century</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dateString</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:02d}{:02d}</span><span class="s2">-</span><span class="si">{:02d}</span><span class="s2">-</span><span class="si">{:02d}</span><span class="s2"> </span><span class="si">{:02d}</span><span class="s2">:</span><span class="si">{:02d}</span><span class="s2">:</span><span class="si">{:02d}</span><span class="s2">.000&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">century</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">second</span>
        <span class="p">)</span>
        <span class="c1"># serial number</span>
        <span class="n">serialNum</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="c1"># num scans</span>
        <span class="n">numScans</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># channels per scan</span>
        <span class="n">numChans</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># tag length</span>
        <span class="n">tagLength</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># status code</span>
        <span class="n">statusCode</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># bit-wise saturation flags</span>
        <span class="n">saturationFlag</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># reserved</span>
        <span class="n">reserved</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># sample length</span>
        <span class="n">sampleLength</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># sample rate</span>
        <span class="n">sampleRate</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="c1"># units of sample rate: 0 = Hz, 1 = minute, 2 = hour, 3 = day</span>
        <span class="n">sampleUnits</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># clock status</span>
        <span class="n">clockStatus</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># clock error in micro seconds</span>
        <span class="n">clockError</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
        <span class="c1"># reserved</span>
        <span class="n">res1</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">res2</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">res3</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">res4</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">res5</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">res6</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># returnt the important variables</span>
        <span class="k">return</span> <span class="n">numScans</span><span class="p">,</span> <span class="n">numChans</span><span class="p">,</span> <span class="n">dateString</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.readRecord"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.readRecord">[docs]</a>    <span class="k">def</span> <span class="nf">readRecord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataFile</span><span class="p">,</span> <span class="n">numChans</span><span class="p">,</span> <span class="n">numScans</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read numScans from a record</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataFile : file handle</span>
<span class="sd">            File handle of the data file</span>
<span class="sd">        numScans : List</span>
<span class="sd">            Number of scans in the tag</span>
<span class="sd">        numChans : List</span>
<span class="sd">            Number of channels in the tag</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        data : np.ndarray(int)</span>
<span class="sd">            Record data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">numChans</span><span class="p">,</span> <span class="n">numScans</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;int&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">scan</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numScans</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numChans</span><span class="p">):</span>
                <span class="n">dataBytes</span> <span class="o">=</span> <span class="n">dataFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                <span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">,</span> <span class="n">scan</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">twosComplement</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.twosComplement"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.twosComplement">[docs]</a>    <span class="k">def</span> <span class="nf">twosComplement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataBytes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read the two&#39;s complement data from the file</span>

<span class="sd">        This parses two&#39;s complement 24-bit integer, little endian, unsigned and signed. The method is to pad out 3 bytes out with a null byte and read as unsigned integer with little endian (&lt;).        </span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataByes : bytes</span>
<span class="sd">            The bytes to parse</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        data : np.ndarray(int)</span>
<span class="sd">            Record data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">printError</span><span class="p">(</span>
                <span class="s2">&quot;The number of bytes divided by the sample byte size does not give an exact number&quot;</span><span class="p">,</span>
                <span class="n">quitRun</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="c1"># calculate num samples, this should be exact</span>
        <span class="n">numSamples</span> <span class="o">=</span> <span class="n">intdiv</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span><span class="p">)</span>
        <span class="n">dataRead</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">numSamples</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numSamples</span><span class="p">):</span>
            <span class="n">sampleBytes</span> <span class="o">=</span> <span class="n">dataBytes</span><span class="p">[</span>
                <span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span> <span class="p">:</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span>
            <span class="p">]</span>
            <span class="n">unsigned</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;I&quot;</span><span class="p">,</span> <span class="n">sampleBytes</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">signed</span> <span class="o">=</span> <span class="n">unsigned</span> <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">unsigned</span> <span class="o">&amp;</span> <span class="mh">0x800000</span><span class="p">)</span> <span class="k">else</span> <span class="n">unsigned</span> <span class="o">-</span> <span class="mh">0x1000000</span>
            <span class="n">dataRead</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">signed</span>
        <span class="k">return</span> <span class="n">dataRead</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.getPhysicalSamples"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.getPhysicalSamples">[docs]</a>    <span class="k">def</span> <span class="nf">getPhysicalSamples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeData</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get data scaled to physical values</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        chans : List[str]</span>
<span class="sd">            List of channels to return if not all are required</span>
<span class="sd">        startSample : int</span>
<span class="sd">            First sample to return</span>
<span class="sd">        endSample : int</span>
<span class="sd">            Last sample to return</span>
<span class="sd">        remaverage : bool</span>
<span class="sd">            Remove average from the data</span>
<span class="sd">        remzeros : bool</span>
<span class="sd">            Remove zeroes from the data</span>
<span class="sd">        remnans: bool</span>
<span class="sd">            Remove NanNs from the data</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        TimeData</span>
<span class="sd">            Time data object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseGetDataKeywords</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># get data</span>
        <span class="n">timeData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUnscaledSamples</span><span class="p">(</span>
            <span class="n">chans</span><span class="o">=</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;chans&quot;</span><span class="p">],</span>
            <span class="n">startSample</span><span class="o">=</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;startSample&quot;</span><span class="p">],</span>
            <span class="n">endSample</span><span class="o">=</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;endSample&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="c1"># need to remove the gain</span>
        <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;chans&quot;</span><span class="p">]:</span>
            <span class="c1"># remove the gain</span>
            <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanGain1</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span>
            <span class="n">timeData</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span>
                <span class="s2">&quot;Scaling channel </span><span class="si">{}</span><span class="s2"> with scalar </span><span class="si">{}</span><span class="s2"> to give mV&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">chan</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanGain1</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># divide by distance in km</span>
            <span class="k">if</span> <span class="n">chan</span> <span class="o">==</span> <span class="s2">&quot;Ex&quot;</span><span class="p">:</span>
                <span class="c1"># multiply by 1000/self.getChanDx same as dividing by dist in km</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanDx</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span>
                    <span class="s2">&quot;Dividing channel </span><span class="si">{}</span><span class="s2"> by electrode distance </span><span class="si">{}</span><span class="s2"> km to give mV/km&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">chan</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanDx</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1000.0</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">chan</span> <span class="o">==</span> <span class="s2">&quot;Ey&quot;</span><span class="p">:</span>
                <span class="c1"># multiply by 1000/self.getChanDy same as dividing by dist in km</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanDy</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span>
                    <span class="s2">&quot;Dividing channel </span><span class="si">{}</span><span class="s2"> by electrode distance </span><span class="si">{}</span><span class="s2"> km to give mV/km&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">chan</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanDy</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1000.0</span>
                    <span class="p">)</span>
                <span class="p">)</span>

            <span class="c1"># if remove zeros - False by default</span>
            <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;remzeros&quot;</span><span class="p">]:</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="n">removeZerosSingle</span><span class="p">(</span><span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">])</span>
            <span class="c1"># if remove nans - False by default</span>
            <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;remnans&quot;</span><span class="p">]:</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="n">removeNansSingle</span><span class="p">(</span><span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">])</span>
            <span class="c1"># remove the average from the data - True by default</span>
            <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;remaverage&quot;</span><span class="p">]:</span>
                <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span>
                    <span class="n">timeData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="c1"># add comments</span>
        <span class="n">timeData</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span>
            <span class="s2">&quot;The required Phoneix scaling to field units is still unverified. This is experimental and use cautiously.&quot;</span>
        <span class="p">)</span>
        <span class="n">timeData</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span>
            <span class="s2">&quot;Remove zeros: </span><span class="si">{}</span><span class="s2">, remove nans: </span><span class="si">{}</span><span class="s2">, remove average: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">options</span><span class="p">[</span><span class="s2">&quot;remzeros&quot;</span><span class="p">],</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;remnans&quot;</span><span class="p">],</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;remaverage&quot;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">timeData</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.chanDefaults"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.chanDefaults">[docs]</a>    <span class="k">def</span> <span class="nf">chanDefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get defaults for channel headers</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            Dictionary of headers for channels and default values</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">chanH</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;gain_stage1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;gain_stage2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;hchopper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># this depends on sample frequency</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;echopper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># channel output information (sensor_type, channel_type, ts_lsb, pos_x1, pos_x2, pos_y1, pos_y2, pos_z1, pos_z2, sensor_sernum)</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;ats_data_file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;num_samples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;sensor_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;channel_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;ts_lsb&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;scaling_applied&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_x1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_x2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_y1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_y2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_z1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_z2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;sensor_sernum&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">chanH</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.readHeader"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.readHeader">[docs]</a>    <span class="k">def</span> <span class="nf">readHeader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read header file</span>

<span class="sd">        For phoenix data, the header file is the table file and it is binary formatted.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># first, find which ts files are available (2,3,4,5)</span>
        <span class="c1"># and the continuous recording frequency (the max)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tsfile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tsfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continuous</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continuousI</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continuousF</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousI</span><span class="p">]</span>
        <span class="c1"># read the table data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readTable</span><span class="p">()</span>
        <span class="c1"># and then populate the headers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chanHeaders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headersFromTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableData</span><span class="p">)</span>
        <span class="c1"># finally, check the number of samples in each file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkSamples</span><span class="p">()</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.readTable"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.readTable">[docs]</a>    <span class="k">def</span> <span class="nf">readTable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Read a header table</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        OrderedDict</span>
<span class="sd">            An ordered dictionary of header table data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">headerF</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span>
                <span class="s2">&quot;More table files than expected. Using: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">headerF</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="n">numBytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">headerF</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">tableFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">headerF</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
        <span class="n">tableData</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
        <span class="c1"># loop through file and read</span>
        <span class="n">bytesRead</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">headerWordSize</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">headerSize</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="n">dataSize</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="n">increment</span> <span class="o">=</span> <span class="n">headerSize</span> <span class="o">+</span> <span class="n">dataSize</span>
        <span class="k">while</span> <span class="n">bytesRead</span> <span class="o">&lt;=</span> <span class="n">numBytes</span> <span class="o">-</span> <span class="n">increment</span><span class="p">:</span>
            <span class="c1"># formats for reading in</span>
            <span class="c1"># integers</span>
            <span class="n">ints</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;SGIN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EGNC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HGNC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EGN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HGN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ACDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ACDH&quot;</span><span class="p">,</span>
                <span class="s2">&quot;V5SR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MTSR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;LCHP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;L2NS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;L3NS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;L4NS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DDAT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TXPR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TBVO&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TBVI&quot;</span><span class="p">,</span>
                <span class="s2">&quot;INIT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;RQST&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MODE&quot;</span><span class="p">,</span>
                <span class="s2">&quot;XDOS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ATYP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;FNAM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;FLEN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;AQST&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HSMP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CALS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CCLS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TEMP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TMAX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;GFPG&quot;</span><span class="p">,</span>
                <span class="s2">&quot;FFPG&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DSP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CHEX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CHEY&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CHHX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CHHY&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CHHZ&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TCHN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;POTS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NREF&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CCLT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;PZLT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NSAT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;OCTR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CLST&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TALS&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TCMB&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TERR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;LPFR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;LFRQ&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SNUM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MXSC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;BADR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NOBF&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SATR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;BAT1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;BAT2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;BAT3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EXR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EYR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ELEV&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SRL2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SRL3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SRL4&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SRL5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DISK&quot;</span><span class="p">,</span>
                <span class="s2">&quot;STDE&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TOTL&quot;</span><span class="p">,</span>
                <span class="s2">&quot;STDH&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="c1"># UTC</span>
            <span class="n">ints1_8</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;TDSP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;LFIX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TSYN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;STIM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ETIM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HTIM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ETMH&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NUTC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;FTIM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;LTIM&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="c1"># non-integer headers</span>
            <span class="n">doubles</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;EXAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EXDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EYAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EYDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HXAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HXDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HYAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HYDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HZAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HZDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DXAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DXDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DYAC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DYDC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EXNR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EXPR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EYNR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EYPR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;GNDR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MAXR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EAZM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HAZM&quot;</span><span class="p">,</span>
                <span class="s2">&quot;DECL&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TSTV&quot;</span><span class="p">,</span>
                <span class="s2">&quot;FSCV&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CCMN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CCMX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HATT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HAMP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CPHC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;LFIX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EXLN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;EYLN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;TSTR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;INPR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CFMN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CFMX&quot;</span><span class="p">,</span>
                <span class="s2">&quot;HNOM&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="c1"># get the header word</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">s&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">headerWordSize</span><span class="p">),</span> <span class="n">tableFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">headerWordSize</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">removeControl</span><span class="p">(</span><span class="n">header</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">tableFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">headerSize</span> <span class="o">-</span> <span class="n">headerWordSize</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">header</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># get rid of empty lines at the end</span>
            <span class="k">if</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">ints</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">tableFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">tableFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">dataSize</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">ints1_8</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;8b&quot;</span><span class="p">,</span> <span class="n">tableFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
                <span class="n">tableFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">dataSize</span> <span class="o">-</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">doubles</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">tableFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">tableFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">dataSize</span> <span class="o">-</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">s&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataSize</span><span class="p">),</span> <span class="n">tableFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">dataSize</span><span class="p">))</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">removeControl</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">tableData</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="c1"># increment bytes read</span>
            <span class="n">bytesRead</span> <span class="o">+=</span> <span class="n">increment</span>
        <span class="n">tableFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tableData</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.removeControl"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.removeControl">[docs]</a>    <span class="k">def</span> <span class="nf">removeControl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inBytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Remove control characters from byte strings</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inBytes : bytes</span>
<span class="sd">            Bytes from which to remove control </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str :</span>
<span class="sd">            Decodes bytes object with control character removed</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">inBytes</span> <span class="o">=</span> <span class="n">inBytes</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inBytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.headersFromTable"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.headersFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">headersFromTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableData</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Populate the headers from the table values</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tableData : OrederedDict</span>
<span class="sd">            Ordered dictionary with table data</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        headers : Dict</span>
<span class="sd">            Dictionary of general headers</span>
<span class="sd">        chanHeaders : Dict</span>
<span class="sd">            List of channel headers</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># initialise storage</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">chanHeaders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># get the sample freqs for each ts file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tsSampleFreqs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tsNum</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tsSampleFreqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;SRL</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tsNum</span><span class="p">)])</span>
        <span class="c1"># for sample frequency, use the continuous channel</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsSampleFreqs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousI</span><span class="p">]</span>
        <span class="c1"># these are the unix time stamps</span>
        <span class="n">firstDate</span><span class="p">,</span> <span class="n">firstTime</span><span class="p">,</span> <span class="n">lastDate</span><span class="p">,</span> <span class="n">lastTime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDates</span><span class="p">(</span><span class="n">tableData</span><span class="p">)</span>
        <span class="c1"># the start date is equal to the time of the first record</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;start_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstDate</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">firstTime</span>
        <span class="n">datetimeStart</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">firstDate</span><span class="p">,</span> <span class="n">firstTime</span><span class="p">),</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="c1"># the stop date</span>
        <span class="n">datetimeLast</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lastDate</span><span class="p">,</span> <span class="n">lastTime</span><span class="p">),</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="c1"># records are usually equal to one second (beginning on 0 and ending on the last sample before the next 0)</span>
        <span class="n">datetimeStop</span> <span class="o">=</span> <span class="n">datetimeLast</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span>
            <span class="n">seconds</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="c1"># put the stop date and time in the headers</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;stop_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetimeStop</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;stop_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetimeStop</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># here calculate number of samples</span>
        <span class="n">deltaSeconds</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetimeStop</span> <span class="o">-</span> <span class="n">datetimeStart</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="c1"># calculate number of samples - have to add one because the time given in SPAM recording is the actual time of the last sample</span>
        <span class="n">numSamples</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">deltaSeconds</span> <span class="o">*</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;num_samples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numSamples</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;ats_data_file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">continuousF</span>
        <span class="c1"># deal with the channel headers</span>
        <span class="c1"># now want to do this in the correct order</span>
        <span class="c1"># chan headers should reflect the order in the data</span>
        <span class="n">chans</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Hx&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">,</span> <span class="s2">&quot;Hz&quot;</span><span class="p">]</span>
        <span class="n">chanOrder</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">chans</span><span class="p">:</span>
            <span class="n">chanOrder</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;CH</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chan</span><span class="o">.</span><span class="n">upper</span><span class="p">())])</span>
        <span class="c1"># sort the lists in the right order based on chanOrder</span>
        <span class="n">chanOrder</span><span class="p">,</span> <span class="n">chans</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">chanOrder</span><span class="p">,</span> <span class="n">chans</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">chans</span><span class="p">:</span>
            <span class="n">chanH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chanDefaults</span><span class="p">()</span>
            <span class="c1"># set the sample frequency from the main headers</span>
            <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">]</span>
            <span class="c1"># channel output information (sensor_type, channel_type, ts_lsb, pos_x1, pos_x2, pos_y1, pos_y2, pos_z1, pos_z2, sensor_sernum)</span>
            <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;ats_data_file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousI</span><span class="p">]</span>
            <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;num_samples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numSamples</span>
            <span class="c1"># channel information</span>
            <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;channel_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">consistentChans</span><span class="p">(</span><span class="n">chan</span><span class="p">)</span>  <span class="c1"># consistent chan naming</span>

            <span class="c1"># magnetic channels only</span>
            <span class="k">if</span> <span class="n">isMagnetic</span><span class="p">(</span><span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;channel_type&quot;</span><span class="p">]):</span>
                <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;sensor_sernum&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">SN&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chan</span><span class="o">.</span><span class="n">upper</span><span class="p">())][</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
                <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;sensor_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Phoenix&quot;</span>
                <span class="c1"># channel input information (gain_stage1, gain_stage2, hchopper, echopper)</span>
                <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;gain_stage1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;HGN&quot;</span><span class="p">]</span>
                <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;gain_stage2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c1"># electric channels only</span>
            <span class="k">if</span> <span class="n">isElectric</span><span class="p">(</span><span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;channel_type&quot;</span><span class="p">]):</span>
                <span class="c1"># the distances</span>
                <span class="k">if</span> <span class="n">chan</span> <span class="o">==</span> <span class="s2">&quot;Ex&quot;</span><span class="p">:</span>
                    <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_x1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;EXLN&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.0</span>
                    <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_x2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_x1&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">chan</span> <span class="o">==</span> <span class="s2">&quot;Ey&quot;</span><span class="p">:</span>
                    <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_y1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;EYLN&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.0</span>
                    <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_y2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;pos_y1&quot;</span><span class="p">]</span>
                <span class="c1"># channel input information (gain_stage1, gain_stage2, hchopper, echopper)</span>
                <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;gain_stage1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;EGN&quot;</span><span class="p">]</span>
                <span class="n">chanH</span><span class="p">[</span><span class="s2">&quot;gain_stage2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c1"># append chanHeaders to the list</span>
            <span class="n">chanHeaders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chanH</span><span class="p">)</span>

        <span class="c1"># data information (meas_channels, sample_freq)</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;meas_channels&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chans</span><span class="p">)</span>  <span class="c1"># this gets reformatted to an int later</span>
        <span class="c1"># return the headers and chanHeaders from this file</span>
        <span class="k">return</span> <span class="n">headers</span><span class="p">,</span> <span class="n">chanHeaders</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.getDates"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.getDates">[docs]</a>    <span class="k">def</span> <span class="nf">getDates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get recording dates (start and end time)</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tableData : OrederedDict</span>
<span class="sd">            Ordered dictionary with table data</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        firstDate : str</span>
<span class="sd">            Date of first sample as string</span>
<span class="sd">        firstTime : str</span>
<span class="sd">            Time of first sample as string</span>
<span class="sd">        lastDate : str</span>
<span class="sd">            Date of last sample as string</span>
<span class="sd">        lastTime : str</span>
<span class="sd">            Time of last sample as string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">firstSecond</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">firstMinute</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">firstHour</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">firstDay</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">firstMonth</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">firstYear</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">firstCentury</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;FTIM&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">firstDate</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:02d}{:02d}</span><span class="s2">-</span><span class="si">{:02d}</span><span class="s2">-</span><span class="si">{:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">firstCentury</span><span class="p">,</span> <span class="n">firstYear</span><span class="p">,</span> <span class="n">firstMonth</span><span class="p">,</span> <span class="n">firstDay</span>
        <span class="p">)</span>
        <span class="n">firstTime</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:02d}</span><span class="s2">:</span><span class="si">{:02d}</span><span class="s2">:</span><span class="si">{:02d}</span><span class="s2">.000&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">firstHour</span><span class="p">,</span> <span class="n">firstMinute</span><span class="p">,</span> <span class="n">firstSecond</span>
        <span class="p">)</span>
        <span class="c1"># this is the start time of the last record</span>
        <span class="n">lastSecond</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lastMinute</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">lastHour</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">lastDay</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">lastMonth</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">lastYear</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">lastCentury</span> <span class="o">=</span> <span class="n">tableData</span><span class="p">[</span><span class="s2">&quot;LTIM&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">lastDate</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:02d}{:02d}</span><span class="s2">-</span><span class="si">{:02d}</span><span class="s2">-</span><span class="si">{:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">lastCentury</span><span class="p">,</span> <span class="n">lastYear</span><span class="p">,</span> <span class="n">lastMonth</span><span class="p">,</span> <span class="n">lastDay</span>
        <span class="p">)</span>
        <span class="n">lastTime</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:02d}</span><span class="s2">:</span><span class="si">{:02d}</span><span class="s2">:</span><span class="si">{:02d}</span><span class="s2">.000&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lastHour</span><span class="p">,</span> <span class="n">lastMinute</span><span class="p">,</span> <span class="n">lastSecond</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">firstDate</span><span class="p">,</span> <span class="n">firstTime</span><span class="p">,</span> <span class="n">lastDate</span><span class="p">,</span> <span class="n">lastTime</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.checkSamples"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.checkSamples">[docs]</a>    <span class="k">def</span> <span class="nf">checkSamples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check the number of samples for all the timeseries (ts) files</span>
<span class="sd">        </span>
<span class="sd">        Recall, the format is 3 bytes two&#39;s complement per sample</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recordStarts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recordBytes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStarts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStops</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># loop over the tsNums</span>
        <span class="n">samplesDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">dFileName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">:</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dFileName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recordStarts</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recordBytes</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStarts</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStops</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># start number of samples at 0</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># get file size in samples</span>
            <span class="n">numBytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">dFileName</span><span class="p">)</span>
            <span class="n">bytesread</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># now run through the file and figure out the number of samples</span>
            <span class="n">dFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dFileName</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">bytesread</span> <span class="o">&lt;</span> <span class="n">numBytes</span><span class="p">:</span>
                <span class="c1"># read 32 bytes tag</span>
                <span class="n">numScans</span><span class="p">,</span> <span class="n">numChans</span><span class="p">,</span> <span class="n">dateString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readTag</span><span class="p">(</span><span class="n">dFile</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recordBytes</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bytesread</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagByteSize</span><span class="p">)</span>
                <span class="n">dataBytes</span> <span class="o">=</span> <span class="n">numScans</span> <span class="o">*</span> <span class="n">numChans</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span>
                <span class="n">dFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">bytesread</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagByteSize</span> <span class="o">+</span> <span class="n">dataBytes</span>
                <span class="c1"># save the record start times and scan lengths</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recordStarts</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dateString</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">numScans</span><span class="p">)</span>
                <span class="c1"># save the sample starts</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStarts</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
                <span class="c1"># increment the number of samples</span>
                <span class="c1"># recall, a scan is all channels recorded at one time</span>
                <span class="c1"># this is equivalent to one sample</span>
                <span class="n">samples</span> <span class="o">+=</span> <span class="n">numScans</span>  <span class="c1"># this is the count</span>
                <span class="c1"># sample stop is samples -1 because inclusive of the current sample</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recordSampleStops</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samples</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">dFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="c1"># save number of samples in dict</span>
            <span class="n">samplesDict</span><span class="p">[</span><span class="n">ts</span><span class="p">]</span> <span class="o">=</span> <span class="n">samples</span>
            <span class="c1"># logFile.close()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tsNumSamples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tsNum</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tsNumSamples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">samplesDict</span><span class="p">[</span><span class="n">tsNum</span><span class="p">])</span>

        <span class="c1"># check the samples of the continuous file</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNumSamples</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousI</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumSamples</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span>
                <span class="s2">&quot;Number of samples calculated from times is different to that in file&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples in file, </span><span class="si">{}</span><span class="s2"> calculated from time&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tsNumSamples</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousI</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumSamples</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.reformatHigh"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.reformatHigh">[docs]</a>    <span class="k">def</span> <span class="nf">reformatHigh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Write out high frequency time series in internal format</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            Directory to write out the reformatted time series</span>
<span class="sd">        ts : List[int], optional</span>
<span class="sd">            A list of the high frequency ts files to reformat. By default, all of the higher frequency recordings are reformatted</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">writer</span> <span class="o">=</span> <span class="n">DataWriterInternal</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">ts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNums</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;ts&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">ts</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ts&quot;</span><span class="p">]:</span>
                <span class="k">continue</span>  <span class="c1"># do not reformat this one</span>
            <span class="c1"># let&#39;s get the headers</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">()</span>
            <span class="n">chanHeaders</span><span class="p">,</span> <span class="n">chanMap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanHeaders</span><span class="p">()</span>
            <span class="n">chans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChannels</span><span class="p">()</span>
            <span class="c1"># now go through the different ts files to get ready to output</span>
            <span class="k">if</span> <span class="n">ts</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">sampleFreq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsSampleFreqs</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="c1"># set sample frequency in headers</span>
            <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sampleFreq</span>
            <span class="k">for</span> <span class="n">cH</span> <span class="ow">in</span> <span class="n">chanHeaders</span><span class="p">:</span>
                <span class="n">cH</span><span class="p">[</span><span class="s2">&quot;sample_freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sampleFreq</span>
            <span class="c1"># now open the data file</span>
            <span class="n">dFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
            <span class="c1"># each record has to be read separately and then compare time to previous</span>
            <span class="n">outStartTime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recordStarts</span><span class="p">[</span><span class="n">ts</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="c1"># set up the data dictionary</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">record</span><span class="p">,</span> <span class="n">startDate</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordStarts</span><span class="p">[</span><span class="n">ts</span><span class="p">]):</span>
                <span class="c1"># start date is a string</span>
                <span class="n">startByte</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordBytes</span><span class="p">[</span><span class="n">ts</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
                <span class="n">startDateTime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">startDate</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># read the record - numpy does not support 24 bit two&#39;s complement (3 bytes) - hence use struct</span>
                <span class="n">bytesToRead</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span><span class="p">[</span><span class="n">ts</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleByteSize</span>
                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">dFile</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">startByte</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># seek to start byte from start of file</span>
                <span class="n">dataBytes</span> <span class="o">=</span> <span class="n">dFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">bytesToRead</span><span class="p">)</span>
                <span class="n">dataRead</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">twosComplement</span><span class="p">(</span><span class="n">dataBytes</span><span class="p">)</span>
                <span class="n">dataRecord</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">chans</span><span class="p">:</span>
                    <span class="c1"># as it is the same order as in the header file</span>
                    <span class="n">chanIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chanMap</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span>
                    <span class="n">dataRecord</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataRead</span><span class="p">[</span>
                        <span class="n">chanIndex</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span><span class="p">[</span><span class="n">ts</span><span class="p">][</span><span class="n">record</span><span class="p">]</span>
                        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNumChannels</span><span class="p">()</span>
                    <span class="p">]</span>
                <span class="c1"># need to compare to previous record</span>
                <span class="k">if</span> <span class="n">record</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">startDateTime</span> <span class="o">!=</span> <span class="n">prevEndTime</span><span class="p">:</span>
                    <span class="c1"># then need to write out the current data before saving the new data</span>
                    <span class="c1"># write out current data</span>
                    <span class="n">outStopTime</span> <span class="o">=</span> <span class="n">prevEndTime</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span>
                        <span class="n">seconds</span><span class="o">=</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">sampleFreq</span>
                    <span class="p">)</span>  <span class="c1"># because inclusive of first sample (previous end time for continuity comparison)</span>
                    <span class="c1"># calculate number of samples</span>
                    <span class="n">numSamples</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">chans</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">size</span>
                    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;start_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outStartTime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outStartTime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;stop_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outStopTime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;stop_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outStopTime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;num_samples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numSamples</span>
                    <span class="k">for</span> <span class="n">cH</span> <span class="ow">in</span> <span class="n">chanHeaders</span><span class="p">:</span>
                        <span class="n">cH</span><span class="p">[</span><span class="s2">&quot;start_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;start_date&quot;</span><span class="p">]</span>
                        <span class="n">cH</span><span class="p">[</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span>
                        <span class="n">cH</span><span class="p">[</span><span class="s2">&quot;stop_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;stop_date&quot;</span><span class="p">]</span>
                        <span class="n">cH</span><span class="p">[</span><span class="s2">&quot;stop_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;stop_time&quot;</span><span class="p">]</span>
                        <span class="n">cH</span><span class="p">[</span><span class="s2">&quot;num_samples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numSamples</span>
                    <span class="c1"># get the outpath</span>
                    <span class="n">dataOutpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">path</span><span class="p">,</span>
                        <span class="s2">&quot;meas_ts</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">ts</span><span class="p">,</span>
                            <span class="n">outStartTime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H-%M-%S&quot;</span><span class="p">),</span>
                            <span class="n">outStopTime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H-%M-%S&quot;</span><span class="p">),</span>
                        <span class="p">),</span>
                    <span class="p">)</span>
                    <span class="c1"># create the timeData object</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;Unscaled samples for interval </span><span class="si">{}</span><span class="s2"> to </span><span class="si">{}</span><span class="s2"> read in from measurement </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">outStartTime</span><span class="p">,</span> <span class="n">outStopTime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">timeData</span> <span class="o">=</span> <span class="n">TimeData</span><span class="p">(</span>
                        <span class="n">sampleFreq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getSampleFreq</span><span class="p">(),</span>
                        <span class="n">startTime</span><span class="o">=</span><span class="n">outStartTime</span><span class="p">,</span>
                        <span class="n">stopTime</span><span class="o">=</span><span class="n">outStopTime</span><span class="p">,</span>
                        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                        <span class="n">comments</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="c1"># write out</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">dataOutpath</span><span class="p">)</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">chanHeaders</span><span class="p">,</span> <span class="n">timeData</span><span class="p">)</span>
                    <span class="c1"># then save current data</span>
                    <span class="n">outStartTime</span> <span class="o">=</span> <span class="n">startDateTime</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">dataRecord</span><span class="p">)</span>
                    <span class="n">prevEndTime</span> <span class="o">=</span> <span class="n">startDateTime</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span>
                        <span class="n">seconds</span><span class="o">=</span><span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">sampleFreq</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span><span class="p">[</span><span class="n">ts</span><span class="p">][</span><span class="n">record</span><span class="p">])</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># then record == 0 or startDateTime == prevEndTime</span>
                    <span class="c1"># update prevEndTime</span>
                    <span class="n">prevEndTime</span> <span class="o">=</span> <span class="n">startDateTime</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span>
                        <span class="n">seconds</span><span class="o">=</span><span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">sampleFreq</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordScans</span><span class="p">[</span><span class="n">ts</span><span class="p">][</span><span class="n">record</span><span class="p">])</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">record</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">dataRecord</span><span class="p">)</span>
                        <span class="k">continue</span>
                    <span class="c1"># otherwise, want to concatenate the data</span>
                    <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="n">chans</span><span class="p">:</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">data</span><span class="p">[</span><span class="n">chan</span><span class="p">],</span> <span class="n">dataRecord</span><span class="p">[</span><span class="n">chan</span><span class="p">]))</span>
            <span class="c1"># close the data file</span>
            <span class="n">dFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.reformatContinuous"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.reformatContinuous">[docs]</a>    <span class="k">def</span> <span class="nf">reformatContinuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write out the continuous time series in internal format</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            Path to write out reformatted continuous recording</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">writer</span> <span class="o">=</span> <span class="n">DataWriterInternal</span><span class="p">()</span>
        <span class="n">outpath</span> <span class="o">=</span> <span class="s2">&quot;meas_ts</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">continuous</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getStartDatetime</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H-%M-%S&quot;</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getStopDatetime</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H-%M-%S&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">outpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">outpath</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">outpath</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">()</span>
        <span class="n">chanHeaders</span><span class="p">,</span> <span class="n">chanMap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChanHeaders</span><span class="p">()</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">chanHeaders</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPhysicalSamples</span><span class="p">(),</span> <span class="n">physical</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.reformat"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.reformat">[docs]</a>    <span class="k">def</span> <span class="nf">reformat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write out all recorded time series to internal format</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            Path to write out reformatted recordings</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reformatContinuous</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reformatHigh</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.printDataFileList"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.printDataFileList">[docs]</a>    <span class="k">def</span> <span class="nf">printDataFileList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Information about the data files as a list of strings</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[str]</span>
<span class="sd">            List of information about the data files</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">textLst</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">textLst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;TS File</span><span class="se">\t\t</span><span class="s2">Sampling frequency (Hz)</span><span class="se">\t\t</span><span class="s2">Num Samples&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dF</span><span class="p">,</span> <span class="n">tsF</span><span class="p">,</span> <span class="n">tsN</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataF</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsSampleFreqs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNumSamples</span><span class="p">):</span>
            <span class="n">textLst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="se">\t\t</span><span class="si">{}</span><span class="se">\t\t</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dF</span><span class="p">),</span> <span class="n">tsF</span><span class="p">,</span> <span class="n">tsN</span><span class="p">))</span>
        <span class="n">textLst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;Continuous data file: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">continuousF</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">textLst</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.printDataFileInfo"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.printDataFileInfo">[docs]</a>    <span class="k">def</span> <span class="nf">printDataFileInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print a list of the data files&quot;&quot;&quot;</span>

        <span class="n">blockPrint</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Data File List&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">printDataFileList</span><span class="p">(),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.printTableFileList"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.printTableFileList">[docs]</a>    <span class="k">def</span> <span class="nf">printTableFileList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Information about the table file as a list of strings</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[str]</span>
<span class="sd">            List of information about table file content</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">textLst</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableData</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">textLst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">textLst</span></div>

<div class="viewcode-block" id="DataReaderPhoenix.printTableFileInfo"><a class="viewcode-back" href="../../../api/resistics.ioHandlers.dataReaderPhoenix.html#resistics.ioHandlers.dataReaderPhoenix.DataReaderPhoenix.printTableFileInfo">[docs]</a>    <span class="k">def</span> <span class="nf">printTableFileInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print table file info&quot;&quot;&quot;</span>

        <span class="n">blockPrint</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Table File Info&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">printTableFileList</span><span class="p">(),</span>
        <span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Neeraj Shah

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>