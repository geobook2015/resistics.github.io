

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Multiple spectra &mdash; resistics 0.0.6 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using configuration files" href="configuration-files.html" />
    <link rel="prev" title="Viewing spectra" href="viewing-spectra.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html"> resistics
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats.html">Data formats</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="project-environment.html">The project environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewing-data.html">Viewing timeseries data</a></li>
<li class="toctree-l2"><a class="reference internal" href="up-and-running.html">Up and running</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipper.html">Calculating the tipper</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewing-spectra.html">Viewing spectra</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multiple spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration-files.html">Using configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="statistics.html">Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="masks.html">Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="mask-processing.html">Processing with masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="recap-and-deeper-dive.html">Recap and deeper dive</a></li>
<li class="toctree-l2"><a class="reference internal" href="date-time-constraints.html">Date and time constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiprocessing.html">Multiprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="next-steps.html">Next steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case-studies.html">Case studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog / backlog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../donate.html">Donate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">resistics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">resistics</a> &raquo;</li>
        
          <li><a href="../tutorial.html">Tutorial</a> &raquo;</li>
        
      <li>Multiple spectra</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/multiple-spectra.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="multiple-spectra">
<h1>Multiple spectra<a class="headerlink" href="#multiple-spectra" title="Permalink to this headline">¶</a></h1>
<p>It is often beneficial to compare the difference between various spectra calculation parameters. To make this easier, resistics supports the calculation of multiple spectra for each timeseries data folder. This is achieved through the <strong>specdir</strong> (short for spectra directory) option.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section describes the <strong>specdir</strong> option and how multiple spectra are saved and supported. However, the easiest way to specify the <strong>specdir</strong> option is in configuration files. For more information, please see <a class="reference internal" href="configuration-files.html"><span class="doc">Using configuration files</span></a>.</p>
</div>
<p>By default, the <strong>specdir</strong> is called <strong>spectra</strong> and spectra data is saved in the following location:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>exampleProject
├── calData
├── timeData
│   └── site1
|       |── dataFolder1
│       |── dataFolder2
|       |──     .
|       |──     .
|       |──     .
|       └── dataFolderN
├── specData
│   └── site1
|       |── dataFolder1
|       |   └── spectra
│       |── dataFolder2
|       |   └── spectra
|       |──     .
|       |──     .
|       |──     .
|       └── dataFolderN
|           └── spectra
├── statData
├── maskData
├── transFuncData
├── images
└── mtProj.prj
</pre></div>
</div>
<p>However, by specifying the <strong>specdir</strong> option in <a class="reference internal" href="../api/resistics.project.spectra.html#resistics.project.spectra.calculateSpectra" title="resistics.project.spectra.calculateSpectra"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculateSpectra()</span></code></a>, a new set of spectra can be calculated.
In the <a class="reference internal" href="viewing-spectra.html"><span class="doc">Viewing spectra</span></a> section, it was clear that the time series spectra had a peak at 50 Hz, which is a common powerline frequency. Therefore, an example is shown below where a second set of spectra are calculated with a notch filter applied at 50 Hz and <strong>specdir</strong> is specified as <code class="code python docutils literal notranslate"><span class="name"><span class="pre">specdir</span></span> <span class="operator"><span class="pre">=</span></span> <span class="literal string double"><span class="pre">“notch”</span></span></code>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datapaths</span> <span class="kn">import</span> <span class="n">projectPath</span><span class="p">,</span> <span class="n">imagePath</span>
<span class="kn">from</span> <span class="nn">resistics.project.io</span> <span class="kn">import</span> <span class="n">loadProject</span>

<span class="n">projData</span> <span class="o">=</span> <span class="n">loadProject</span><span class="p">(</span><span class="n">projectPath</span><span class="p">)</span>

<span class="c1"># calculate another set of spectra for the 128 Hz data with notching at 50Hz and 16.667Hz</span>
<span class="kn">from</span> <span class="nn">resistics.project.spectra</span> <span class="kn">import</span> <span class="n">calculateSpectra</span>

<span class="n">calculateSpectra</span><span class="p">(</span><span class="n">projData</span><span class="p">,</span> <span class="n">sampleFreqs</span><span class="o">=</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span> <span class="n">notch</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span> <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">)</span>
<span class="n">projData</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The new set of spectra data with <code class="code python docutils literal notranslate"><span class="name"><span class="pre">specdir</span></span> <span class="operator"><span class="pre">=</span></span> <span class="literal string double"><span class="pre">“notch”</span></span></code> are saved in the following way:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>exampleProject
├── calData
├── timeData
│   └── site1
|       |── dataFolder1
│       |── dataFolder2
|       |──     .
|       |──     .
|       |──     .
|       └── dataFolderN
├── specData
│   └── site1
|       |── dataFolder1
|       |   |── notch
|       |   └── spectra
|       |
│       |── dataFolder2
|       |   |── notch
|       |   └── spectra
|       |──     .
|       |──     .
|       |──     .
|       └── dataFolderN
|           |── notch
|           └── spectra
├── statData
├── maskData
├── transFuncData
├── images
└── mtProj.prj
</pre></div>
</div>
<p>To view the new spectra data, <strong>specdir</strong> needs to be specified in the calls to <a class="reference internal" href="../api/resistics.project.spectra.html#resistics.project.spectra.viewSpectra" title="resistics.project.spectra.viewSpectra"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectra()</span></code></a>, <a class="reference internal" href="../api/resistics.project.spectra.html#resistics.project.spectra.viewSpectraSection" title="resistics.project.spectra.viewSpectraSection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectraSection()</span></code></a> and <a class="reference internal" href="../api/resistics.project.spectra.html#resistics.project.spectra.viewSpectraStack" title="resistics.project.spectra.viewSpectraStack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectraStack()</span></code></a>. An example is provided below using <a class="reference internal" href="../api/resistics.project.spectra.html#resistics.project.spectra.viewSpectraSection" title="resistics.project.spectra.viewSpectraSection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectraSection()</span></code></a>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># view the spectra</span>
<span class="kn">from</span> <span class="nn">resistics.common.plot</span> <span class="kn">import</span> <span class="n">plotOptionsSpec</span><span class="p">,</span> <span class="n">getPaperFonts</span>
<span class="kn">from</span> <span class="nn">resistics.project.spectra</span> <span class="kn">import</span> <span class="n">viewSpectra</span><span class="p">,</span> <span class="n">viewSpectraSection</span>

<span class="n">plotOptions</span> <span class="o">=</span> <span class="n">plotOptionsSpec</span><span class="p">(</span><span class="n">plotfonts</span><span class="o">=</span><span class="n">getPaperFonts</span><span class="p">())</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewspec_notch_spec&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the plots below, the default spectra data and the notched spectra data are shown.</p>
<div class="align-center figure" id="id1">
<img alt="alternate text" src="../_images/viewSpec_projspec_128_view.png" />
<p class="caption"><span class="caption-text">Default spectra data</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="id2">
<img alt="alternate text" src="../_images/multspec_viewspec_notch_spec.png" />
<p class="caption"><span class="caption-text">Notched spectra data</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>A spectra section can also be plotted in a similar to way the example shown in <a class="reference internal" href="viewing-spectra.html"><span class="doc">Viewing Spectra</span></a>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">viewSpectraSection</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewspec_notch_section&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id3">
<img alt="alternate text" src="../_images/multspec_viewspec_notch_section.png" />
<p class="caption"><span class="caption-text">Notched spectra section</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>For the sake of comarpison, the default (no notch) spectra section.</p>
<div class="align-center figure" id="id4">
<img alt="alternate text" src="../_images/viewSpec_projspec_128_section.png" />
<p class="caption"><span class="caption-text">Default spectra section</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Further, inspecting the comments of the notched spectra data, the application of the notch filter and the frequency is recorded.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Unscaled data 2012-02-10 11:30:00 to 2012-02-11 23:03:43.992188 read in from measurement E:\magnetotellurics\code\resisticsdata\tutorial\tutorialProject\timeData\site1\meas_2012-02-10_11-30-00, samples 0 to 16387071
Sampling frequency 128.0
Scaling channel Ex with scalar -0.000112591 to give mV
Dividing channel Ex by electrode distance 0.08 km to give mV/km
Scaling channel Ey with scalar -0.000112512 to give mV
Dividing channel Ey by electrode distance 0.091 km to give mV/km
Scaling channel Hx with scalar -0.00360174 to give mV
Scaling channel Hy with scalar -0.00360038 to give mV
Scaling channel Hz with scalar -0.0036007 to give mV
Remove zeros: False, remove nans: False, remove average: True
---------------------------------------------------
Calculating project spectra
Using default configuration
Channel Ex not calibrated
Channel Ey not calibrated
Channel Hx calibrated with calibration data from file E:\magnetotellurics\code\resisticsdata\tutorial\tutorialProject\calData\Hx_MFS06365.TXT
Channel Hy calibrated with calibration data from file E:\magnetotellurics\code\resisticsdata\tutorial\tutorialProject\calData\Hy_MFS06357.TXT
Channel Hz calibrated with calibration data from file E:\magnetotellurics\code\resisticsdata\tutorial\tutorialProject\calData\Hz_MFS06307.TXT
Notch filter applied at 50 Hz
Decimating with 7 levels and 7 frequencies per level
Evaluation frequencies for this level 32.0, 22.62741699796952, 16.0, 11.31370849898476, 8.0, 5.65685424949238, 4.0
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 128.0 Hz to 16.0 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:43.937500
Evaluation frequencies for this level 2.82842712474619, 2.0, 1.414213562373095, 1.0, 0.7071067811865475, 0.5, 0.35355339059327373
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 16.0 Hz to 2.0 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:43.500000
Evaluation frequencies for this level 0.25, 0.17677669529663687, 0.125, 0.08838834764831843, 0.0625, 0.044194173824159216, 0.03125
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 2.0 Hz to 0.25 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:40
Time data decimated from 0.25 Hz to 0.125 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:36
Evaluation frequencies for this level 0.022097086912079608, 0.015625, 0.011048543456039804, 0.0078125, 0.005524271728019902, 0.00390625, 0.002762135864009951
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 0.125 Hz to 0.015625 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:20
Evaluation frequencies for this level 0.001953125, 0.0013810679320049755, 0.0009765625, 0.0006905339660024878, 0.00048828125, 0.0003452669830012439, 0.000244140625
Windowing with window size 512 samples and overlap 128 samples
Spectra data written out to E:\magnetotellurics\code\resisticsdata\tutorial\tutorialProject\specData\site1\meas_2012-02-10_11-30-00\notch on 2019-10-05 20:10:06.845930 using resistics 0.0.6.dev2
---------------------------------------------------
</pre></div>
</td></tr></table></div>
<p>The next step is to process the notched spectra data. To do this, <strong>specdir</strong> has to be specified in the call to <a class="reference internal" href="../api/resistics.project.transfunc.html#resistics.project.transfunc.processProject" title="resistics.project.transfunc.processProject"><code class="xref py py-meth docutils literal notranslate"><span class="pre">processProject()</span></code></a> as shown below:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># process the new set of spectra</span>
<span class="kn">from</span> <span class="nn">resistics.project.transfunc</span> <span class="kn">import</span> <span class="n">processProject</span>

<span class="n">processProject</span><span class="p">(</span><span class="n">projData</span><span class="p">,</span> <span class="n">sites</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;site1&quot;</span><span class="p">],</span> <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Finally, the transfer function data for the notched spectra data can be viewed by once more specifying the <strong>specdir</strong> option in the call to <a class="reference internal" href="../api/resistics.project.transfunc.html#resistics.project.transfunc.viewImpedance" title="resistics.project.transfunc.viewImpedance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewImpedance()</span></code></a></p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># plot the transfer functions, again with specifying the relevant specdir</span>
<span class="kn">from</span> <span class="nn">resistics.project.transfunc</span> <span class="kn">import</span> <span class="n">viewImpedance</span>

<span class="n">figs</span> <span class="o">=</span> <span class="n">viewImpedance</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="n">sites</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;site1&quot;</span><span class="p">],</span>
    <span class="n">sampleFreqs</span><span class="o">=</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span>
    <span class="n">oneplot</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">figs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewimp_notch&quot;</span><span class="p">)</span>

<span class="c1"># and compare to the original</span>
<span class="n">figs</span> <span class="o">=</span> <span class="n">viewImpedance</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="n">sites</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;site1&quot;</span><span class="p">],</span>
    <span class="n">sampleFreqs</span><span class="o">=</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span>
    <span class="n">oneplot</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;spectra&quot;</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">figs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewimp_nonotch&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The impedance for the default spectra calculated parameters and then for the notch parameters are shown below.</p>
<div class="align-center figure" id="id5">
<img alt="alternate text" src="../_images/multspec_viewimp_notch.png" />
<p class="caption"><span class="caption-text">Default impedance tensor estimation</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="id6">
<img alt="alternate text" src="../_images/multspec_viewimp_nonotch.png" />
<p class="caption"><span class="caption-text">Impedance tensor estimation using the notched spectra data</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>As mentioned in the note at the top of this page, the simplest way to use the specdir option is through configuration files.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When specifying specdir in a configuration file, the specdir keyword no longer has to be passed to the various method calls as it is picked up directly from the confiugration file. This makes everything much simpler and removes a source of mistakes.</p>
</div>
<p>More information about configuration files is provided in the <a class="reference internal" href="../features/configuration.html"><span class="doc">Configuration files</span></a> section. An example of using configuration files is provided in the <a class="reference internal" href="configuration-files.html"><span class="doc">Using configuration files</span></a> section.</p>
<div class="section" id="complete-example-script">
<h2>Complete example script<a class="headerlink" href="#complete-example-script" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of clarity, the complete example script is provided below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datapaths</span> <span class="kn">import</span> <span class="n">projectPath</span><span class="p">,</span> <span class="n">imagePath</span>
<span class="kn">from</span> <span class="nn">resistics.project.io</span> <span class="kn">import</span> <span class="n">loadProject</span>

<span class="n">projData</span> <span class="o">=</span> <span class="n">loadProject</span><span class="p">(</span><span class="n">projectPath</span><span class="p">)</span>

<span class="c1"># calculate another set of spectra for the 128 Hz data with notching at 50Hz and 16.667Hz</span>
<span class="kn">from</span> <span class="nn">resistics.project.spectra</span> <span class="kn">import</span> <span class="n">calculateSpectra</span>

<span class="n">calculateSpectra</span><span class="p">(</span><span class="n">projData</span><span class="p">,</span> <span class="n">sampleFreqs</span><span class="o">=</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span> <span class="n">notch</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span> <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">)</span>
<span class="n">projData</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

<span class="c1"># view the spectra</span>
<span class="kn">from</span> <span class="nn">resistics.common.plot</span> <span class="kn">import</span> <span class="n">plotOptionsSpec</span><span class="p">,</span> <span class="n">getPaperFonts</span>
<span class="kn">from</span> <span class="nn">resistics.project.spectra</span> <span class="kn">import</span> <span class="n">viewSpectra</span><span class="p">,</span> <span class="n">viewSpectraSection</span>

<span class="n">plotOptions</span> <span class="o">=</span> <span class="n">plotOptionsSpec</span><span class="p">(</span><span class="n">plotfonts</span><span class="o">=</span><span class="n">getPaperFonts</span><span class="p">())</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewspec_notch_spec&quot;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">viewSpectraSection</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewspec_notch_section&quot;</span><span class="p">)</span>

<span class="c1"># process the new set of spectra</span>
<span class="kn">from</span> <span class="nn">resistics.project.transfunc</span> <span class="kn">import</span> <span class="n">processProject</span>

<span class="n">processProject</span><span class="p">(</span><span class="n">projData</span><span class="p">,</span> <span class="n">sites</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;site1&quot;</span><span class="p">],</span> <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">)</span>

<span class="c1"># plot the transfer functions, again with specifying the relevant specdir</span>
<span class="kn">from</span> <span class="nn">resistics.project.transfunc</span> <span class="kn">import</span> <span class="n">viewImpedance</span>

<span class="n">figs</span> <span class="o">=</span> <span class="n">viewImpedance</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="n">sites</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;site1&quot;</span><span class="p">],</span>
    <span class="n">sampleFreqs</span><span class="o">=</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span>
    <span class="n">oneplot</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;notch&quot;</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">figs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewimp_notch&quot;</span><span class="p">)</span>

<span class="c1"># and compare to the original</span>
<span class="n">figs</span> <span class="o">=</span> <span class="n">viewImpedance</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="n">sites</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;site1&quot;</span><span class="p">],</span>
    <span class="n">sampleFreqs</span><span class="o">=</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span>
    <span class="n">oneplot</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">specdir</span><span class="o">=</span><span class="s2">&quot;spectra&quot;</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">figs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagePath</span> <span class="o">/</span> <span class="s2">&quot;multspec_viewimp_nonotch&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration-files.html" class="btn btn-neutral float-right" title="Using configuration files" accesskey="n" rel="next">Next</a>
      
      
        <a href="viewing-spectra.html" class="btn btn-neutral" title="Viewing spectra" accesskey="p" rel="prev">Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Neeraj Shah.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/unitedstack/sphinx_rtd_theme">theme</a> provided by <a href="https://github.com/unitedstack">UnitedStack</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.6',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>