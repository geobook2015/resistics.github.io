

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Viewing spectra &mdash; resistics 0.0.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css\custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Multiple spectra" href="multiple-spectra.html" />
    <link rel="prev" title="Calculating the tipper" href="tipper.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> resistics
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats.html">Data formats</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="project-environment.html">The project environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewing-data.html">Viewing timeseries data</a></li>
<li class="toctree-l2"><a class="reference internal" href="up-and-running.html">Up and running</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipper.html">Calculating the tipper</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Viewing spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiple-spectra.html">Multiple spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration-files.html">Using configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="statistics.html">Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="masks.html">Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="mask-processing.html">Processing with masks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../donate.html">Donate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">resistics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tutorial.html">Tutorial</a> &raquo;</li>
        
      <li>Viewing spectra</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/viewing-spectra.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="viewing-spectra">
<h1>Viewing spectra<a class="headerlink" href="#viewing-spectra" title="Permalink to this headline">¶</a></h1>
<p>Spectra data is stored in the following locations.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>exampleProject
├── calData
├── timeData
│   └── site1
|       |── dataFolder1
│       |── dataFolder2
|       |──     .
|       |──     .
|       |──     .
|       └── dataFolderN
├── specData
│   └── site1
|       |── dataFolder1
|       |   └── spectra
│       |── dataFolder2
|       |   └── spectra
|       |──     .
|       |──     .
|       |──     .
|       └── dataFolderN
|           └── spectra
├── statData
├── maskData
├── transFuncData
├── images
└── mtProj.prj
</pre></div>
</div>
<p>Each spectra file that is calculated is written out with a set of comments. The comment file is a text file that can be opened in any text editor and records the various parameters used when calculating out spectra. An example is given below.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Unscaled data 2012-02-10 11:30:00 to 2012-02-11 23:03:43.992188 read in from measurement tutorialProject\timeData\site1\meas_2012-02-10_11-30-00, samples 0 to 16387071
Sampling frequency 128.0
Scaling channel Ex with scalar -0.000112591 to give mV
Dividing channel Ex by electrode distance 0.08 km to give mV/km
Scaling channel Ey with scalar -0.000112512 to give mV
Dividing channel Ey by electrode distance 0.091 km to give mV/km
Scaling channel Hx with scalar -0.00360174 to give mV
Scaling channel Hy with scalar -0.00360038 to give mV
Scaling channel Hz with scalar -0.0036007 to give mV
Remove zeros: False, remove nans: False, remove average: True
---------------------------------------------------
Calculating project spectra
Using default configuration
Channel Ex not calibrated
Channel Ey not calibrated
Channel Hx calibrated with calibration data from file tutorialProject\calData\Hx_MFS06365.TXT
Channel Hy calibrated with calibration data from file tutorialProject\calData\Hy_MFS06357.TXT
Channel Hz calibrated with calibration data from file tutorialProject\calData\Hz_MFS06307.TXT
Decimating with 7 levels and 7 frequencies per level
Evaluation frequencies for this level 32.0, 22.62741699796952, 16.0, 11.31370849898476, 8.0, 5.65685424949238, 4.0
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 128.0 Hz to 16.0 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:43.937500
Evaluation frequencies for this level 2.82842712474619, 2.0, 1.414213562373095, 1.0, 0.7071067811865475, 0.5, 0.35355339059327373
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 16.0 Hz to 2.0 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:43.500000
Evaluation frequencies for this level 0.25, 0.17677669529663687, 0.125, 0.08838834764831843, 0.0625, 0.044194173824159216, 0.03125
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 2.0 Hz to 0.25 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:40
Time data decimated from 0.25 Hz to 0.125 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:36
Evaluation frequencies for this level 0.022097086912079608, 0.015625, 0.011048543456039804, 0.0078125, 0.005524271728019902, 0.00390625, 0.002762135864009951
Windowing with window size 512 samples and overlap 128 samples
Time data decimated from 0.125 Hz to 0.015625 Hz, new start time 2012-02-10 11:30:00, new end time 2012-02-11 23:03:20
Evaluation frequencies for this level 0.001953125, 0.0013810679320049755, 0.0009765625, 0.0006905339660024878, 0.00048828125, 0.0003452669830012439, 0.000244140625
Windowing with window size 512 samples and overlap 128 samples
Spectra data written out to tutorialProject\specData\site1\meas_2012-02-10_11-30-00\spectra on 2019-04-13 17:36:48.781887
---------------------------------------------------
</pre></div>
</td></tr></table></div>
<p>There are a few methods in <a class="reference internal" href="../api/resistics.project.projectSpectra.html#module-resistics.project.projectSpectra" title="resistics.project.projectSpectra"><code class="xref py py-mod docutils literal notranslate"><span class="pre">projectSpectra</span></code></a> that can be used to visualise spectra. These are:</p>
<ul class="simple">
<li>View raw spectra data for time windows</li>
<li>View spectra sections - an image of spectras calculated over the period of recording</li>
<li>View spectra periodograms</li>
</ul>
<p>To begin looking at spectra, load the project in the standard way.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectIO</span> <span class="kn">import</span> <span class="n">loadProject</span>

<span class="c1"># load the project</span>
<span class="n">projectPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;tutorialProject&quot;</span><span class="p">)</span>
<span class="n">projData</span> <span class="o">=</span> <span class="n">loadProject</span><span class="p">(</span><span class="n">projectPath</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The fourier spectra can be viewed using the <a class="reference internal" href="../api/resistics.project.projectSpectra.html#resistics.project.projectSpectra.viewSpectra" title="resistics.project.projectSpectra.viewSpectra"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectra()</span></code></a> method, which takes a site and measurement as arguments.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># view the spectra at 128 Hz</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectSpectra</span> <span class="kn">import</span> <span class="n">viewSpectra</span>

<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This gives the following output:</p>
<div class="align-center figure" id="id1">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.png" />
<p class="caption"><span class="caption-text">Plot of the first time window spectrum</span></p>
</div>
<p>Plotting options can be defined using the <code class="code python docutils literal notranslate"><span class="name"><span class="pre">plotoptions</span></span></code> keyword for <a class="reference internal" href="../api/resistics.project.projectSpectra.html#resistics.project.projectSpectra.viewSpectra" title="resistics.project.projectSpectra.viewSpectra"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectra()</span></code></a>. This needs to be a dictionary defining layout options (limits etc). There are some built-in plot options for different types of plots. In the below example, <a class="reference internal" href="../api/resistics.utilities.utilsPlotter.html#resistics.utilities.utilsPlotter.plotOptionsSpec" title="resistics.utilities.utilsPlotter.plotOptionsSpec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plotOptionsSpec()</span></code></a> returns a dictionary of standard plot options for spectra. Further, <a class="reference internal" href="../api/resistics.utilities.utilsPlotter.html#resistics.utilities.utilsPlotter.getPaperFonts" title="resistics.utilities.utilsPlotter.getPaperFonts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getPaperFonts()</span></code></a> returns a dictionary of font sizes to use for the plot targetted at papers.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># setting the plot options</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsPlotter</span> <span class="kn">import</span> <span class="n">plotOptionsSpec</span><span class="p">,</span> <span class="n">getPaperFonts</span>

<span class="n">plotOptions</span> <span class="o">=</span> <span class="n">plotOptionsSpec</span><span class="p">(</span><span class="n">plotfonts</span><span class="o">=</span><span class="n">getPaperFonts</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">plotOptions</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The plot options dictionary looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;figsize&#39;: (20, 12), &#39;plotfonts&#39;: {&#39;suptitle&#39;: 18, &#39;title&#39;: 17, &#39;axisLabel&#39;: 16, &#39;axisTicks&#39;: 15, &#39;legend&#39;: 15}, &#39;block&#39;: True, &#39;amplim&#39;: []}
</pre></div>
</div>
<p>Now plotting the spectra again with the new plot options gives the same plot but with bigger font sizes which might be useful for an academic paper.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># view the spectra at 128 Hz</span>
<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id2">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.1.png" />
<p class="caption"><span class="caption-text">Plot of the first time window spectrum using a different set of plot options</span></p>
</div>
<p>Currently, this is only plotting the spectrum of the first time window. To explore variation, more than a single time window can be plotted. This is achieved using the <code class="code python docutils literal notranslate"><span class="name"><span class="pre">plotwindow</span></span></code> keyword. The plotwindow keyword can be:</p>
<ul class="simple">
<li>An integer which is the local index of the time window (local index means referenced to the start time of the time series)</li>
<li>“all”, which will plot 20 windows across the duration of the whole measurement</li>
<li>A dictionary with a start and stop, i.e. {start: 30, stop:40}, which will then define the range 30, 31, 32, 33, 34, 35, 36, 37, 38, 39 and 40</li>
</ul>
<p>In the below example, <code class="code python docutils literal notranslate"><span class="name"><span class="pre">plotwindow</span></span> <span class="operator"><span class="pre">=</span></span> <span class="literal string double"><span class="pre">“all”</span></span></code> which means that 20 windows across the time series measurement will be plotted.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># view the spectra at 128 Hz for more than a single window</span>
<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">chans</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">],</span>
    <span class="n">plotwindow</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id3">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.2.png" />
<p class="caption"><span class="caption-text">Plot of multiple window spectra</span></p>
</div>
<p>Another useful way to inspect the variation of spectra across the time series measurement is to plot a spectra section using the <a class="reference internal" href="../api/resistics.project.projectSpectra.html#resistics.project.projectSpectra.viewSpectraSection" title="resistics.project.projectSpectra.viewSpectraSection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectraSection()</span></code></a> method of <a class="reference internal" href="../api/resistics.project.projectSpectra.html#module-resistics.project.projectSpectra" title="resistics.project.projectSpectra"><code class="xref py py-mod docutils literal notranslate"><span class="pre">projectSpectra</span></code></a>. This is a 2-D image of the spectra with time across the x-axis and frequency across the y-axis with colour representing the amplitude. An example of plotting a spectra section and the image is shown below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>47
48
49
50
51
52
53
54
55
56
57
58</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># spectra sections</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectSpectra</span> <span class="kn">import</span> <span class="n">viewSpectraSection</span>

<span class="n">plotOptions</span> <span class="o">=</span> <span class="n">plotOptionsSpec</span><span class="p">(</span><span class="n">plotfonts</span><span class="o">=</span><span class="n">getPaperFonts</span><span class="p">())</span>
<span class="n">viewSpectraSection</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id4">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.2.png" />
<p class="caption"><span class="caption-text">Plot of a spectra section for 128Hz sampling frequency data</span></p>
</div>
<p>Spectra sections plot 250 window spectra across the duration of the time series measurement.</p>
<p>To understand the dominant frequencies in a time series measurement, it can be useful to perform spectral stacking. This can be achieved using the <a class="reference internal" href="../api/resistics.project.projectSpectra.html#resistics.project.projectSpectra.viewSpectraStack" title="resistics.project.projectSpectra.viewSpectraStack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectraStack()</span></code></a> method of <a class="reference internal" href="../api/resistics.project.projectSpectra.html#module-resistics.project.projectSpectra" title="resistics.project.projectSpectra"><code class="xref py py-mod docutils literal notranslate"><span class="pre">projectSpectra</span></code></a>. Spectra stacking will averages the spectra amplitudes across multiple windows.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>60
61
62
63
64
65
66
67
68
69
70
71</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># spectra stack</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectSpectra</span> <span class="kn">import</span> <span class="n">viewSpectraStack</span>

<span class="n">viewSpectraStack</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">coherences</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Hx&quot;</span><span class="p">]],</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id5">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.2.png" />
<p class="caption"><span class="caption-text">Plot of a spectra stacking for 128Hz sampling frequency data</span></p>
</div>
<p>Adding the <strong>coherences</strong> keyword also stacks the coherences. The number of stacks to perform across the duration of the time series measurement can be controlled using the <strong>numstacks</strong> keyword. For more information, see the documentation for <a class="reference internal" href="../api/resistics.project.projectSpectra.html#resistics.project.projectSpectra.viewSpectraStack" title="resistics.project.projectSpectra.viewSpectraStack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">viewSpectraStack()</span></code></a>.</p>
<p>The above were demonstrated on data sampled at 128Hz sampling rate but can be easily calculated for the 4096Hz data of the tutorial project.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># view the spectra at 4096 Hz</span>
<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-05-00&quot;</span><span class="p">,</span>
    <span class="n">plotwindow</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">viewSpectraSection</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-05-00&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">viewSpectraStack</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-05-00&quot;</span><span class="p">,</span>
    <span class="n">coherences</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Hx&quot;</span><span class="p">]],</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The resultant plots are:</p>
<div class="align-center figure" id="id6">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.2.png" />
<p class="caption"><span class="caption-text">Plot of a spectra for 20 windows across the 4096Hz measurement</span></p>
</div>
<div class="align-center figure" id="id7">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.2.png" />
<p class="caption"><span class="caption-text">Plot of spectra section for the 4096Hz measurement</span></p>
</div>
<div class="align-center figure" id="id8">
<img alt="alternate text" src="../_images/spectraData_site1_meas_2012-02-10_11-30-00_dec0_spectra.2.png" />
<p class="caption"><span class="caption-text">Plot of spectra stack for the 4096Hz measurement</span></p>
</div>
<p>All the above are a means to understand the dominant frequencies in the time series data. Ideally, the Schumann resonances should be visible, as they are in the 128Hz data. Other common features are powerline noise - the exact frequency of this is dependent on geographic location, but often 50Hz - and train noise around 16.6Hz.</p>
<div class="section" id="complete-example-script">
<h2>Complete example script<a class="headerlink" href="#complete-example-script" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of clarity, the complete example script is provided below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectIO</span> <span class="kn">import</span> <span class="n">loadProject</span>

<span class="c1"># load the project</span>
<span class="n">projectPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;tutorialProject&quot;</span><span class="p">)</span>
<span class="n">projData</span> <span class="o">=</span> <span class="n">loadProject</span><span class="p">(</span><span class="n">projectPath</span><span class="p">)</span>

<span class="c1"># view the spectra at 128 Hz</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectSpectra</span> <span class="kn">import</span> <span class="n">viewSpectra</span>

<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># setting the plot options</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsPlotter</span> <span class="kn">import</span> <span class="n">plotOptionsSpec</span><span class="p">,</span> <span class="n">getPaperFonts</span>

<span class="n">plotOptions</span> <span class="o">=</span> <span class="n">plotOptionsSpec</span><span class="p">(</span><span class="n">plotfonts</span><span class="o">=</span><span class="n">getPaperFonts</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">plotOptions</span><span class="p">)</span>

<span class="c1"># view the spectra at 128 Hz</span>
<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># view the spectra at 128 Hz for more than a single window</span>
<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">chans</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">],</span>
    <span class="n">plotwindow</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># spectra sections</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectSpectra</span> <span class="kn">import</span> <span class="n">viewSpectraSection</span>

<span class="n">plotOptions</span> <span class="o">=</span> <span class="n">plotOptionsSpec</span><span class="p">(</span><span class="n">plotfonts</span><span class="o">=</span><span class="n">getPaperFonts</span><span class="p">())</span>
<span class="n">viewSpectraSection</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># spectra stack</span>
<span class="kn">from</span> <span class="nn">resistics.project.projectSpectra</span> <span class="kn">import</span> <span class="n">viewSpectraStack</span>

<span class="n">viewSpectraStack</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-30-00&quot;</span><span class="p">,</span>
    <span class="n">coherences</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Hx&quot;</span><span class="p">]],</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># view the spectra at 4096 Hz</span>
<span class="n">viewSpectra</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-05-00&quot;</span><span class="p">,</span>
    <span class="n">plotwindow</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">viewSpectraSection</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-05-00&quot;</span><span class="p">,</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">viewSpectraStack</span><span class="p">(</span>
    <span class="n">projData</span><span class="p">,</span>
    <span class="s2">&quot;site1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;meas_2012-02-10_11-05-00&quot;</span><span class="p">,</span>
    <span class="n">coherences</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span> <span class="s2">&quot;Hy&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Ey&quot;</span><span class="p">,</span> <span class="s2">&quot;Hx&quot;</span><span class="p">]],</span>
    <span class="n">plotoptions</span><span class="o">=</span><span class="n">plotOptions</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multiple-spectra.html" class="btn btn-neutral float-right" title="Multiple spectra" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tipper.html" class="btn btn-neutral float-left" title="Calculating the tipper" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Neeraj Shah

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>