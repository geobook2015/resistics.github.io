

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Metronix Calibration &mdash; resistics 0.0.6.dev2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="RSP Calibration" href="rsp-calibration.html" />
    <link rel="prev" title="Calibration data" href="../calibration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> resistics
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../formats.html">Data formats</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../timeseries.html">Timeseries data</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../calibration.html">Calibration data</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Metronix Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="rsp-calibration.html">RSP Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="rspx-calibration.html">RSPX Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="ascii-calibration.html">ASCII Calibration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../case-studies.html">Case studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate.html">Donate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">resistics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../formats.html">Data formats</a> &raquo;</li>
        
          <li><a href="../calibration.html">Calibration data</a> &raquo;</li>
        
      <li>Metronix Calibration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/formats/calibration/metronix-calibration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metronix-calibration">
<h1>Metronix Calibration<a class="headerlink" href="#metronix-calibration" title="Permalink to this headline">¶</a></h1>
<p>Metronix calibration files are ASCII files with some metadata and calibration information for when the induction coil is operating with either the pre-amplifier chopper on or chopper off.</p>
<p>The units of metronix calibration files are interpreted to be:</p>
<ul class="simple">
<li>Frequency in Hz</li>
<li>Magnitude in V/(nT*Hz)</li>
<li>Phase in degrees</li>
</ul>
<p>Resistics will automatically convert these units to:</p>
<ul class="simple">
<li>Frequency in Hz</li>
<li>Magnitude in mV/nT (including any static gain)</li>
<li>Phase in radians</li>
</ul>
<div class="section" id="naming-in-the-project-environment">
<h2>Naming in the project environment<a class="headerlink" href="#naming-in-the-project-environment" title="Permalink to this headline">¶</a></h2>
<p>When using the project environment, resistics automatically searches for calibration files in the calData folder.
Metronix files should be named according to the following specification:</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>[*][SENSOR][SERIAL].TXT</p>
<p>where,</p>
<ul class="last simple">
<li>SENSOR is the sensor type</li>
<li>SERIAL is the serial number</li>
<li>[*] represents any general string</li>
</ul>
</div>
<p>As an example, consider an induction coil with:</p>
<ul class="simple">
<li>sensor type MFS06</li>
<li>sensor serial number 365</li>
</ul>
<p>Then the file could be named:</p>
<ul class="simple">
<li>MFS06365.TXT</li>
<li>Or could have any leading text such as: cal_MFS06365.TXT</li>
</ul>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The class <a class="reference internal" href="../../api/resistics.ioHandlers.calibrationIO.html#resistics.ioHandlers.calibrationIO.CalibrationIO" title="resistics.ioHandlers.calibrationIO.CalibrationIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationIO</span></code></a> can be used to read in Metronix calibration files.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.calibrationIO</span> <span class="kn">import</span> <span class="n">CalibrationIO</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.calibrationIO</span> <span class="kn">import</span> <span class="n">CalibrationData</span>

<span class="c1"># read metronix calibration data with chopper off</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;calData&quot;</span><span class="p">,</span> <span class="s2">&quot;Hz_MFS06307.TXT&quot;</span><span class="p">)</span>
<span class="n">calIO</span> <span class="o">=</span> <span class="n">CalibrationIO</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;metronix&quot;</span><span class="p">,</span> <span class="n">chopper</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">calDataChopperOff</span> <span class="o">=</span> <span class="n">calIO</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>When using <a class="reference internal" href="../../api/resistics.ioHandlers.calibrationIO.html#resistics.ioHandlers.calibrationIO.CalibrationIO" title="resistics.ioHandlers.calibrationIO.CalibrationIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationIO</span></code></a> to read a calibration file, the filepath and calibration data format need to be defined. Further, the chopper to read in and extension rule can be optionally passed.</p>
<p>The method <a class="reference internal" href="../../api/resistics.ioHandlers.calibrationIO.html#resistics.ioHandlers.calibrationIO.CalibrationIO.read" title="resistics.ioHandlers.calibrationIO.CalibrationIO.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> returns a <a class="reference internal" href="../../api/resistics.dataObjects.calibrationData.html#resistics.dataObjects.calibrationData.CalibrationData" title="resistics.dataObjects.calibrationData.CalibrationData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationData</span></code></a> object. Information about this can be printed to the terminal, giving:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span>12:26:24 CalibrationData: ####################
12:26:24 CalibrationData: CALIBRATIONDATA INFO BEGIN
12:26:24 CalibrationData: ####################
12:26:24 CalibrationData: Filename = calData\Hz_MFS06307.TXT
12:26:24 CalibrationData: Serial = 307
12:26:24 CalibrationData: Sensor =
12:26:24 CalibrationData: Static gain = 1.00
12:26:24 CalibrationData: Chopper = False
12:26:24 CalibrationData: Number of frequency points = 25
12:26:24 CalibrationData: Calibration data:
12:26:24 CalibrationData:          Frequency [Hz]       Mag. [mv/nT]    Phase [rad]
12:26:24 CalibrationData:              1.00000000           185.76            1.99
12:26:24 CalibrationData:              1.46780000           297.86            1.68
12:26:24 CalibrationData:              2.15440000           431.76            1.37
12:26:24 CalibrationData:              3.16230000           564.44            1.06
12:26:24 CalibrationData:              4.64160000           673.50            0.79
12:26:24 CalibrationData:              6.81300000           745.68            0.56
12:26:24 CalibrationData:             10.00000000           787.25            0.39
12:26:24 CalibrationData:             14.67800000           809.83            0.27
12:26:24 CalibrationData:             21.54400000           819.17            0.18
12:26:24 CalibrationData:             31.62300000           823.40            0.12
12:26:24 CalibrationData:             46.41600000           825.83            0.08
12:26:24 CalibrationData:             68.13000000           821.44            0.04
12:26:24 CalibrationData:            100.00000000           826.59            0.03
12:26:24 CalibrationData:            146.78000000           827.91            0.01
12:26:24 CalibrationData:            215.45000000           827.59           -0.01
12:26:24 CalibrationData:            316.23000000           827.04           -0.03
12:26:24 CalibrationData:            464.16000000           827.32           -0.05
12:26:24 CalibrationData:            681.30000000           828.12           -0.08
12:26:24 CalibrationData:           1000.00000000           829.22           -0.12
12:26:24 CalibrationData:           1467.80000000           828.29           -0.19
12:26:24 CalibrationData:           2154.50000000           816.08           -0.28
12:26:24 CalibrationData:           3162.30000000           797.63           -0.42
12:26:24 CalibrationData:           4641.70000000           720.48           -0.63
12:26:24 CalibrationData:           6813.00000000           619.91           -0.74
12:26:24 CalibrationData:          10000.00000000           571.23           -0.97
12:26:24 CalibrationData: ####################
12:26:24 CalibrationData: CALIBRATIONDATA INFO END
12:26:24 CalibrationData: ####################
</pre></div>
</td></tr></table></div>
<p>Notice that the sensor information is blank. This is because Metronix files do not include information about the sensor type.</p>
<p>Once the calibration data file is read in, the calibration curve can be viewed by using the <a class="reference internal" href="../../api/resistics.dataObjects.calibrationData.html#resistics.dataObjects.calibrationData.CalibrationData.view" title="resistics.dataObjects.calibrationData.CalibrationData.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">view()</span></code></a> method of <a class="reference internal" href="../../api/resistics.dataObjects.calibrationData.html#resistics.dataObjects.calibrationData.CalibrationData" title="resistics.dataObjects.calibrationData.CalibrationData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationData</span></code></a>. By passing a matplotlib figure to this, the layout of the plot can be controlled.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># plot</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;calibrationMetronixChopperOff.png&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id1">
<img alt="alternate text" src="../../_images/calibrationMetronixChopperOff.png" />
<p class="caption"><span class="caption-text">Viewing the calibration data for chopper off and not extended</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The same calibration file can be read again, but this time with extension of the data too. The parameters of <a class="reference internal" href="../../api/resistics.ioHandlers.calibrationIO.html#resistics.ioHandlers.calibrationIO.CalibrationIO" title="resistics.ioHandlers.calibrationIO.CalibrationIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationIO</span></code></a> can be reset by using the <a class="reference internal" href="../../api/resistics.ioHandlers.calibrationIO.html#resistics.ioHandlers.calibrationIO.CalibrationIO.refresh" title="resistics.ioHandlers.calibrationIO.CalibrationIO.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh()</span></code></a> method.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># extend True</span>
<span class="n">calIO</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;metronix&quot;</span><span class="p">,</span> <span class="n">chopper</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">calDataExtend</span> <span class="o">=</span> <span class="n">calIO</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">calDataExtend</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Now the extended calibration data can be plotted against the original, unextended version.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># plot the two together</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">calDataExtend</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off, Extend True&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;calibrationMetronixExtend.png&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
<p>Giving the possibly unexpected plot below.</p>
<div class="align-center figure" id="id2">
<img alt="alternate text" src="../../_images/calibrationMetronixExtend.png" />
<p class="caption"><span class="caption-text">Viewing the chopper off calibration data, extended and original</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember that extension happens in the original units of the calibration data. For Metronix data files, this is in V/(nT*Hz). Then the data is converted to mV/nT. The fact that the original data is a frequency density gives the slopes in the magnitude extension.</p>
</div>
<p>The chopper on data in the Metronix calibration file can be read by specifying <code class="code python docutils literal notranslate"><span class="name"><span class="pre">chopper</span></span><span class="operator"><span class="pre">=</span></span><span class="name builtin pseudo"><span class="pre">True</span></span></code> to <a class="reference internal" href="../../api/resistics.ioHandlers.calibrationIO.html#resistics.ioHandlers.calibrationIO.CalibrationIO" title="resistics.ioHandlers.calibrationIO.CalibrationIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">CalibrationIO</span></code></a> as shown below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># read in the chopper on</span>
<span class="n">calIO</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;metronix&quot;</span><span class="p">,</span> <span class="n">chopper</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">calDataChopperOn</span> <span class="o">=</span> <span class="n">calIO</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">calDataChopperOn</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># plot the three together</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">calDataChopperOn</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper on&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;calibrationMetronixChopperOn.png&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
<p>And the the chopper on data can be compared to the chopper off data in much the same way as the above comparison with the extended data. The comparison is shown in the following plot.</p>
<div class="align-center figure" id="id3">
<img alt="alternate text" src="../../_images/calibrationMetronixChopperOn.png" />
<p class="caption"><span class="caption-text">Viewing the calibration data for chopper off and chopper on</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Finally, calibration data can be written out in a simple ASCII format.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>46
47</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># write as the ASCII format</span>
<span class="n">calIO</span><span class="o">.</span><span class="n">writeInternalFormat</span><span class="p">(</span>
</pre></div>
</td></tr></table></div>
<p>Giving the file below:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Serial = 307
Sensor = 
Static gain = 1
Magnitude unit = mV/nT
Phase unit = radians
Chopper = True

CALIBRATION DATA
+1.0000e-01  +1.9967e+01  +1.5452e+00
+1.4678e-01  +2.9303e+01  +1.5339e+00
+2.1544e-01  +4.2933e+01  +1.5173e+00
+3.1623e-01  +6.2901e+01  +1.4931e+00
+4.6416e-01  +9.1945e+01  +1.4576e+00
+6.8130e-01  +1.3418e+02  +1.4051e+00
+1.0000e+00  +1.9404e+02  +1.3394e+00
+1.4678e+00  +2.7551e+02  +1.2296e+00
+2.1544e+00  +3.8111e+02  +1.0904e+00
+3.1623e+00  +5.0078e+02  +9.1815e-01
+4.6416e+00  +6.1636e+02  +7.2902e-01
+6.8130e+00  +7.0664e+02  +5.4810e-01
+1.0000e+01  +7.6400e+02  +3.9286e-01
+1.4678e+01  +7.9669e+02  +2.7489e-01
+2.1545e+01  +8.1231e+02  +1.8837e-01
+3.1623e+01  +8.2062e+02  +1.2735e-01
+4.6416e+01  +8.2453e+02  +8.4177e-02
+6.8130e+01  +8.2219e+02  +4.5146e-02
+1.0000e+02  +8.2609e+02  +2.8629e-02
+1.4678e+02  +8.2567e+02  +1.0910e-02
+2.1545e+02  +8.2660e+02  -7.6749e-03
+3.1623e+02  +8.2631e+02  -2.6356e-02
+4.6417e+02  +8.2636e+02  -4.8977e-02
+6.8130e+02  +8.2730e+02  -7.8009e-02
+1.0000e+03  +8.2795e+02  -1.2135e-01
+1.4678e+03  +8.2721e+02  -1.8637e-01
+2.1545e+03  +8.1548e+02  -2.8374e-01
+3.1623e+03  +7.9639e+02  -4.2317e-01
+4.6417e+03  +7.1928e+02  -6.2696e-01
+6.8130e+03  +6.1971e+02  -7.4339e-01
+1.0000e+04  +5.7145e+02  -9.7107e-01
</pre></div>
</td></tr></table></div>
<p>The internal ascii calibration format writes out values in the following units:</p>
<ul class="simple">
<li>Magnitude in mV/nT (without static gain applied)</li>
<li>Phase in radians</li>
</ul>
<p>The magnitude is written out without static gain applied, though the static gain value is written out in the internally formatted calibration file. When this file is read in again, the static gain will be applied once more.</p>
<p>Chopper is True as the calibration data written out was for chopper on. There is no sensor information as Metronix calibration files do not include information about the sensor.</p>
</div>
<div class="section" id="complete-example-script">
<h2>Complete example script<a class="headerlink" href="#complete-example-script" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of clarity, the example script in full.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.calibrationIO</span> <span class="kn">import</span> <span class="n">CalibrationIO</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.calibrationIO</span> <span class="kn">import</span> <span class="n">CalibrationData</span>

<span class="c1"># read metronix calibration data with chopper off</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;calData&quot;</span><span class="p">,</span> <span class="s2">&quot;Hz_MFS06307.TXT&quot;</span><span class="p">)</span>
<span class="n">calIO</span> <span class="o">=</span> <span class="n">CalibrationIO</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;metronix&quot;</span><span class="p">,</span> <span class="n">chopper</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">calDataChopperOff</span> <span class="o">=</span> <span class="n">calIO</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># plot</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;calibrationMetronixChopperOff.png&quot;</span><span class="p">))</span>

<span class="c1"># extend True</span>
<span class="n">calIO</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;metronix&quot;</span><span class="p">,</span> <span class="n">chopper</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">calDataExtend</span> <span class="o">=</span> <span class="n">calIO</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">calDataExtend</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># plot the two together</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">calDataExtend</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off, Extend True&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;calibrationMetronixExtend.png&quot;</span><span class="p">))</span>

<span class="c1"># read in the chopper on</span>
<span class="n">calIO</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;metronix&quot;</span><span class="p">,</span> <span class="n">chopper</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">calDataChopperOn</span> <span class="o">=</span> <span class="n">calIO</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">calDataChopperOn</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># plot the three together</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">calDataChopperOff</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper off&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">calDataChopperOn</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Chopper on&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;calibrationMetronixChopperOn.png&quot;</span><span class="p">))</span>

<span class="c1"># write as the ASCII format</span>
<span class="n">calIO</span><span class="o">.</span><span class="n">writeInternalFormat</span><span class="p">(</span>
    <span class="n">calDataChopperOn</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;calData&quot;</span><span class="p">,</span> <span class="s2">&quot;metronix2ascii.TXT&quot;</span><span class="p">)</span>
<span class="p">)</span>

</pre></div>
</td></tr></table></div>
<p>The calibration file the script is reading.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Calibration measurement with Solartron
Metronix GmbH, Kocherstr. 3, 38120 Braunschweig

  Magnetometer: 365    Date: 27/11/08    Time: 11:11:38



 FREQUENCY    MAGNITUDE      PHASE    
    Hz                     deg    
Chopper On
+1.0000E-01  +2.0043E-01  +8.8520E+01    
+1.2589E-01  +2.0034E-01  +8.8161E+01    
+1.5849E-01  +2.0017E-01  +8.7667E+01    
+1.9953E-01  +2.0011E-01  +8.7117E+01    
+2.5119E-01  +2.0016E-01  +8.6402E+01    
+3.1623E-01  +2.0019E-01  +8.5552E+01    
+3.9811E-01  +1.9947E-01  +8.4367E+01    
+5.0119E-01  +1.9940E-01  +8.2918E+01    
+6.3095E-01  +1.9849E-01  +8.1023E+01    
+7.9430E-01  +1.9689E-01  +7.8954E+01    
+1.0000E+00  +1.9510E-01  +7.6254E+01    
+1.2589E+00  +1.9176E-01  +7.2912E+01    
+1.5849E+00  +1.8711E-01  +6.8955E+01    
+1.9952E+00  +1.8039E-01  +6.4078E+01    
+2.5119E+00  +1.7102E-01  +5.8623E+01    
+3.1623E+00  +1.5875E-01  +5.2421E+01    
+3.9810E+00  +1.4449E-01  +4.6101E+01    
+5.0118E+00  +1.2745E-01  +3.9381E+01    
+6.3095E+00  +1.0974E-01  +3.3023E+01    
+7.9430E+00  +9.2439E-02  +2.7481E+01    
+1.0000E+01  +7.6461E-02  +2.2411E+01    
+1.2589E+01  +6.2517E-02  +1.8156E+01    
+1.5849E+01  +5.0509E-02  +1.4523E+01    
+1.9952E+01  +4.0600E-02  +1.1539E+01    
+2.5119E+01  +3.2444E-02  +9.1190E+00    
+3.1622E+01  +2.5959E-02  +7.0988E+00    
+3.9810E+01  +2.0616E-02  +5.5029E+00    
+5.0118E+01  +1.6420E-02  +4.4471E+00    
+6.3095E+01  +1.3146E-02  +3.3092E+00    
+7.9430E+01  +1.0399E-02  +2.3841E+00    
+1.0000E+02  +8.2636E-03  +1.5609E+00    
+1.2589E+02  +6.5602E-03  +8.3949E-01    
+1.5849E+02  +5.2332E-03  +2.3482E-01    
+1.9952E+02  +4.1432E-03  -4.6963E-01    
+2.5118E+02  +3.2917E-03  -1.0720E+00    
+3.1622E+02  +2.6122E-03  -1.7975E+00    
+3.9810E+02  +2.0748E-03  -2.5889E+00    
+5.0118E+02  +1.6473E-03  -3.5470E+00    
+6.3094E+02  +1.3067E-03  -4.6898E+00    
+7.9430E+02  +1.0360E-03  -6.0646E+00    
+1.0000E+03  +8.2162E-04  -7.7787E+00    
+1.2589E+03  +6.5076E-04  -9.7948E+00    
+1.5849E+03  +5.1474E-04  -1.2441E+01    
+1.9952E+03  +4.0614E-04  -1.5666E+01    
+2.5118E+03  +3.1859E-04  -2.0111E+01    
+3.1622E+03  +2.4617E-04  -2.5492E+01    
+3.9810E+03  +1.8636E-04  -3.2122E+01    
+5.0117E+03  +1.3435E-04  -3.9112E+01    
+6.3094E+03  +9.5229E-05  -4.2706E+01    
+7.9430E+03  +7.2220E-05  -4.6970E+01    
+9.9995E+03  +5.4496E-05  -5.4995E+01    
+1.0000E+04  +5.4500E-05  -5.4988E+01    
                                         
                                 
 FREQUENCY    MAGNITUDE      PHASE       
    Hz                     deg           
Chopper Off
+1.0000E+00  +1.8611E-01  +1.1410E+02    
+1.2589E+00  +1.9840E-01  +1.0386E+02    
+1.5849E+00  +2.0421E-01  +9.3422E+01    
+1.9953E+00  +2.0263E-01  +8.2185E+01    
+2.5119E+00  +1.9428E-01  +7.1237E+01    
+3.1623E+00  +1.7901E-01  +6.0768E+01    
+3.9811E+00  +1.5954E-01  +5.1025E+01    
+5.0119E+00  +1.3766E-01  +4.2242E+01    
+6.3095E+00  +1.1590E-01  +3.4394E+01    
+7.9430E+00  +9.6266E-02  +2.7719E+01    
+1.0000E+01  +7.8837E-02  +2.2634E+01    
+1.2589E+01  +6.3878E-02  +1.7903E+01    
+1.5849E+01  +5.1205E-02  +1.4319E+01    
+1.9952E+01  +4.0978E-02  +1.1342E+01    
+2.5119E+01  +3.2722E-02  +8.9618E+00    
+3.1623E+01  +2.6096E-02  +7.1141E+00    
+3.9810E+01  +2.0736E-02  +5.5471E+00    
+5.0118E+01  +1.6447E-02  +4.2488E+00    
+6.3095E+01  +1.3140E-02  +3.2258E+00    
+7.9430E+01  +1.0422E-02  +2.2666E+00    
+1.0000E+02  +8.2896E-03  +1.5141E+00    
+1.2589E+02  +6.5791E-03  +8.4879E-01    
+1.5849E+02  +5.2351E-03  +1.5632E-03    
+1.9952E+02  +4.1479E-03  -4.3138E-01    
+2.5119E+02  +3.2948E-03  -1.1863E+00    
+3.1622E+02  +2.6164E-03  -1.8097E+00    
+3.9810E+02  +2.0787E-03  -2.6202E+00    
+5.0118E+02  +1.6486E-03  -3.4773E+00    
+6.3095E+02  +1.3096E-03  -4.6120E+00    
+7.9430E+02  +1.0388E-03  -5.9924E+00    
+1.0000E+03  +8.2342E-04  -7.4157E+00    
+1.2589E+03  +6.5300E-04  -9.6045E+00    
+1.5849E+03  +5.1570E-04  -1.2194E+01    
+1.9952E+03  +4.0744E-04  -1.5371E+01    
+2.5118E+03  +3.1944E-04  -2.0146E+01    
+3.1622E+03  +2.4673E-04  -2.5515E+01    
+3.9810E+03  +1.8680E-04  -3.2187E+01    
+5.0118E+03  +1.3456E-04  -3.9213E+01    
+6.3094E+03  +9.5246E-05  -4.2806E+01    
+7.9430E+03  +7.2206E-05  -4.7006E+01    
+1.0000E+04  +5.4489E-05  -5.5006E+01    
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rsp-calibration.html" class="btn btn-neutral float-right" title="RSP Calibration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../calibration.html" class="btn btn-neutral float-left" title="Calibration data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Neeraj Shah

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>