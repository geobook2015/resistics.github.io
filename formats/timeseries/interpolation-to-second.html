

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interpolation to second &mdash; resistics rc1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css\custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Calibration data" href="../calibration.html" />
    <link rel="prev" title="Internal binary format" href="internal-binary-format.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> resistics
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conventions.html">Conventions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../formats.html">Data formats</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../timeseries.html">Timeseries data</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ATS-timeseries.html">ATS timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="SPAM-timeseries.html">SPAM timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="Phoenix-timeseries.html">Phoenix timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="ascii-timeseries.html">ASCII timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal-binary-format.html">Internal binary format</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Interpolation to second</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../calibration.html">Calibration data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate.html">Donate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">resistics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../formats.html">Data formats</a> &raquo;</li>
        
          <li><a href="../timeseries.html">Timeseries data</a> &raquo;</li>
        
      <li>Interpolation to second</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/formats/timeseries/interpolation-to-second.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interpolation-to-second">
<h1>Interpolation to second<a class="headerlink" href="#interpolation-to-second" title="Permalink to this headline">¶</a></h1>
<p>For best results, resistics requires data to be sampled on the second. For an example of a dataset not sampled on the second, consider recording at 10 Hz, with the first sample at 0.05 seconds. Then the sample times will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0.05 0.15 0.25 0.35 0.45 0.55 0.65 0.75 0.85 0.95 1.05 1.15 1.25 ...
</pre></div>
</div>
<p>Interpolating to the second will change the sample times to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0.10 0.20 0.30 0.40 0.50 0.60 0.70 0.80 0.90 1.00 1.10 1.20 ...
</pre></div>
</div>
<p>The easiest way to show how to do this is with a practical example. First read in some SPAM data and look at the recording information.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataReaderSpam</span> <span class="kn">import</span> <span class="n">DataReaderSPAM</span>

<span class="c1"># read in spam data</span>
<span class="n">spamPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;timeData&quot;</span><span class="p">,</span> <span class="s2">&quot;spam&quot;</span><span class="p">)</span>
<span class="n">spamReader</span> <span class="o">=</span> <span class="n">DataReaderSPAM</span><span class="p">(</span><span class="n">spamPath</span><span class="p">)</span>
<span class="n">spamReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">spamData</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getPhysicalSamples</span><span class="p">()</span>
<span class="n">spamData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The recording information printed to the screen gives:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span>17:09:56 DataReaderSPAM: ####################
17:09:56 DataReaderSPAM: DATAREADERSPAM INFO BEGIN
17:09:56 DataReaderSPAM: ####################
17:09:56 DataReaderSPAM: Data Path = timeData\spam
17:09:56 DataReaderSPAM: Global Headers
17:09:56 DataReaderSPAM: {&#39;sample_freq&#39;: 250.0, &#39;start_date&#39;: &#39;2016-02-07&#39;, &#39;start_time&#39;: &#39;00:00:00.003200&#39;, &#39;stop_date&#39;: &#39;2016-02-07&#39;, &#39;stop_time&#39;: &#39;23:59:59.999200&#39;, &#39;num_samples&#39;: 21600000, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;meas_channels&#39;: 4}
17:09:56 DataReaderSPAM: Channels found:
17:09:56 DataReaderSPAM: [&#39;Hx&#39;, &#39;Hy&#39;, &#39;Ex&#39;, &#39;Ey&#39;]
17:09:56 DataReaderSPAM: Channel Map
17:09:56 DataReaderSPAM: {&#39;Hx&#39;: 0, &#39;Hy&#39;: 1, &#39;Ex&#39;: 2, &#39;Ey&#39;: 3}
17:09:56 DataReaderSPAM: Channel Headers
17:09:56 DataReaderSPAM: Hx
17:09:56 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 1, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;MFS06&#39;, &#39;channel_type&#39;: &#39;Hx&#39;, &#39;ts_lsb&#39;: -1000.0,
&#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 0.0, &#39;pos_x2&#39;: 0.0, &#39;pos_y1&#39;: 0.0, &#39;pos_y2&#39;: 0.0, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 133, &#39;sample_freq&#39;: 250.0}
17:09:56 DataReaderSPAM: Hy
17:09:56 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 1, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;MFS06&#39;, &#39;channel_type&#39;: &#39;Hy&#39;, &#39;ts_lsb&#39;: -1000.0,
&#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 0.0, &#39;pos_x2&#39;: 0.0, &#39;pos_y1&#39;: 0.0, &#39;pos_y2&#39;: 0.0, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 135, &#39;sample_freq&#39;: 250.0}
17:09:56 DataReaderSPAM: Ex
17:09:56 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 0, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;ELC00&#39;, &#39;channel_type&#39;: &#39;Ex&#39;, &#39;ts_lsb&#39;: -1000.0,
&#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 29.35, &#39;pos_x2&#39;: 29.35, &#39;pos_y1&#39;: 0.0, &#39;pos_y2&#39;: 0.0, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0,
&#39;sensor_sernum&#39;: 0, &#39;sample_freq&#39;: 250.0}
17:09:56 DataReaderSPAM: Ey
17:09:56 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 0, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;ELC00&#39;, &#39;channel_type&#39;: &#39;Ey&#39;, &#39;ts_lsb&#39;: -1000.0,
&#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 0.0, &#39;pos_x2&#39;: 0.0, &#39;pos_y1&#39;: 28.2, &#39;pos_y2&#39;: 28.2, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 0, &#39;sample_freq&#39;: 250.0}
17:09:56 DataReaderSPAM: Note: Field units used. Physical data has units mV/km for electric fields and mV for magnetic fields
17:09:56 DataReaderSPAM: Note: To get magnetic field in nT, please calibrate
17:09:56 DataReaderSPAM: ####################
17:09:56 DataReaderSPAM: DATAREADERSPAM INFO END
17:09:56 DataReaderSPAM: ####################
</pre></div>
</td></tr></table></div>
<p>And the time data information:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span>17:09:57 TimeData: ####################
17:09:57 TimeData: TIMEDATA INFO BEGIN
17:09:57 TimeData: ####################
17:09:57 TimeData: Sampling frequency [Hz] = 250.0
17:09:57 TimeData: Sample rate [s] = 0.004
17:09:57 TimeData: Number of samples = 21600000
17:09:57 TimeData: Number of channels = 4
17:09:57 TimeData: Channels = [&#39;Ex&#39;, &#39;Ey&#39;, &#39;Hx&#39;, &#39;Hy&#39;]
17:09:57 TimeData: Start time = 2016-02-07 00:00:00.003200
17:09:57 TimeData: Stop time = 2016-02-07 23:59:59.999200
17:09:57 TimeData: Comments
17:09:57 TimeData:      Unscaled data 2016-02-07 00:00:00.003200 to 2016-02-07 23:59:59.999200 read in from measurement
timeData\spam, samples 0 to 21599999
17:09:57 TimeData:      Data read from 1 files in total
17:09:57 TimeData:      Data scaled to mV for all channels using scalings in header files
17:09:57 TimeData:      Sampling frequency 250.0
17:09:57 TimeData:      Dividing channel Ex by electrode distance 0.0587 km to give mV/km
17:09:57 TimeData:      Dividing channel Ey by electrode distance 0.0564 km to give mV/km
17:09:57 TimeData:      Remove zeros: False, remove nans: False, remove average: True
17:09:57 TimeData: ####################
17:09:57 TimeData: TIMEDATA INFO END
17:09:57 TimeData: ####################
</pre></div>
</td></tr></table></div>
<p>This dataset is sampled at 250 Hz, which equates to a sampling period of 0.004 seconds. Looking at the start time, the data starts at 00:00:00.003200. This combination of start time and sampling period will not give data sampled on the second. Resistics includes the <a class="reference internal" href="../../api/resistics.utilities.utilsInterp.html#resistics.utilities.utilsInterp.interpolateToSecond" title="resistics.utilities.utilsInterp.interpolateToSecond"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interpolateToSecond()</span></code></a> for interpolating time data to the second. This method uses spline interpolation.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># interpolate to second</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsInterp</span> <span class="kn">import</span> <span class="n">interpolateToSecond</span>

<span class="n">interpData</span> <span class="o">=</span> <span class="n">interpolateToSecond</span><span class="p">(</span><span class="n">spamData</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">interpData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="../../api/resistics.utilities.utilsInterp.html#resistics.utilities.utilsInterp.interpolateToSecond" title="resistics.utilities.utilsInterp.interpolateToSecond"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interpolateToSecond()</span></code></a> does not support data sampled at frequencies below 1 Hz. Please do not use it for this sort of data.</p>
</div>
<p>Printing out information about this time data gives a new start time and provides interpolating information in the comments.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span>17:10:15 TimeData: ####################
17:10:15 TimeData: TIMEDATA INFO BEGIN
17:10:15 TimeData: ####################
17:10:15 TimeData: Sampling frequency [Hz] = 250.0
17:10:15 TimeData: Sample rate [s] = 0.004
17:10:15 TimeData: Number of samples = 21599750
17:10:15 TimeData: Number of channels = 4
17:10:15 TimeData: Channels = [&#39;Ex&#39;, &#39;Ey&#39;, &#39;Hx&#39;, &#39;Hy&#39;]
17:10:15 TimeData: Start time = 2016-02-07 00:00:01
17:10:15 TimeData: Stop time = 2016-02-07 23:59:59.996000
17:10:15 TimeData: Comments
17:10:15 TimeData:      Unscaled data 2016-02-07 00:00:00.003200 to 2016-02-07 23:59:59.999200 read in from measurement
timeData\spam, samples 0 to 21599999
17:10:15 TimeData:      Data read from 1 files in total
17:10:15 TimeData:      Data scaled to mV for all channels using scalings in header files
17:10:15 TimeData:      Sampling frequency 250.0
17:10:15 TimeData:      Dividing channel Ex by electrode distance 0.0587 km to give mV/km
17:10:15 TimeData:      Dividing channel Ey by electrode distance 0.0564 km to give mV/km
17:10:15 TimeData:      Remove zeros: False, remove nans: False, remove average: True
17:10:15 TimeData:      Time data interpolated to nearest second. New start time 2016-02-07 00:00:01, new end time 2016-02-07 23:59:59.996000, new number of samples 21599750
17:10:15 TimeData: ####################
17:10:15 TimeData: TIMEDATA INFO END
17:10:15 TimeData: ####################
</pre></div>
</td></tr></table></div>
<p>The new start time of this time data is 00:00:01.000000, which means a few samples at the start of the data have been dropped. <a class="reference internal" href="../../api/resistics.utilities.utilsInterp.html#resistics.utilities.utilsInterp.interpolateToSecond" title="resistics.utilities.utilsInterp.interpolateToSecond"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interpolateToSecond()</span></code></a> will always start the data at the next second.</p>
<p>It is possible to now write out this dataset using the <a class="reference internal" href="../../api/resistics.ioHandlers.dataWriterInternal.html#resistics.ioHandlers.dataWriterInternal.DataWriterInternal" title="resistics.ioHandlers.dataWriterInternal.DataWriterInternal"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataWriterInternal</span></code></a> class. However, header information needs to be passed to this class and can be taken from the <a class="reference internal" href="../../api/resistics.ioHandlers.dataReader.html#resistics.ioHandlers.dataReader.DataReader" title="resistics.ioHandlers.dataReader.DataReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataReader</span></code></a> object. Where there is a mismatch between the headers and the time data (for example, the start time of the headers will no longer match the start time of the interpolated data), the information in the <a class="reference internal" href="../../api/resistics.dataObjects.timeData.html#resistics.dataObjects.timeData.TimeData" title="resistics.dataObjects.timeData.TimeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeData</span></code></a> object is preferentially used.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># can now write out the interpolated dataset</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataWriterInternal</span> <span class="kn">import</span> <span class="n">DataWriterInternal</span>

<span class="n">interpPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;timeData&quot;</span><span class="p">,</span> <span class="s2">&quot;spamInterp&quot;</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">()</span>
<span class="n">chanHeaders</span><span class="p">,</span> <span class="n">chanMap</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getChanHeaders</span><span class="p">()</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">DataWriterInternal</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">interpPath</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span>
    <span class="n">headers</span><span class="p">,</span>
    <span class="n">chanHeaders</span><span class="p">,</span>
    <span class="n">interpData</span><span class="p">,</span>
    <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The comments associated with the new dataset are shown below.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Unscaled data 2016-02-07 00:00:00.003200 to 2016-02-07 23:59:59.999200 read in from measurement timeData\spam, samples 0 to 21599999
Data read from 1 files in total
Data scaled to mV for all channels using scalings in header files
Sampling frequency 250.0
Dividing channel Ex by electrode distance 0.0587 km to give mV/km
Dividing channel Ey by electrode distance 0.0564 km to give mV/km
Remove zeros: False, remove nans: False, remove average: True
Time data interpolated to nearest second. New start time 2016-02-07 00:00:01, new end time 2016-02-07 23:59:59.996000, new number of samples 21599750 
Dataset written to timeData\spamInterp on 2019-03-24 17:10:15.301582
</pre></div>
</td></tr></table></div>
<p>To visualise the difference between the original and interpolated data, the interpolated data can be read back in using the <a class="reference internal" href="../../api/resistics.ioHandlers.dataReaderInternal.html#resistics.ioHandlers.dataReaderInternal.DataReaderInternal" title="resistics.ioHandlers.dataReaderInternal.DataReaderInternal"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataReaderInternal</span></code></a> class.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># read in the internal data</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataReaderInternal</span> <span class="kn">import</span> <span class="n">DataReaderInternal</span>

<span class="n">interpReader</span> <span class="o">=</span> <span class="n">DataReaderInternal</span><span class="p">(</span><span class="n">interpPath</span><span class="p">)</span>
<span class="n">interpReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">interpReader</span><span class="o">.</span><span class="n">printComments</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Next, request data from both the original and new reader for a given date range so that the data overlaps.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># get data between a time range</span>
<span class="n">startTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:10:00&quot;</span>
<span class="n">stopTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:30:00&quot;</span>
<span class="n">spamData</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">)</span>
<span class="n">interpData</span> <span class="o">=</span> <span class="n">interpReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Finally, plot the data on the same plot using a matplotlib figure object to help out with this.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># plot the datasets</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">spamData</span><span class="o">.</span><span class="n">getDateArray</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="n">spamData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="s2">&quot;o--&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">interpData</span><span class="o">.</span><span class="n">getDateArray</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="n">interpData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="s2">&quot;x:&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Original&quot;</span><span class="p">,</span> <span class="s2">&quot;Interpolated&quot;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The figure shows that the interpolated and original data are close, but the sample timings are different. Note again that interpolation uses a spline interpolation rather than linear interpolation.</p>
<div class="align-center figure" id="id1">
<img alt="alternate text" src="../../_images/interpolation.png" />
<p class="caption"><span class="caption-text">Original SPAM data versus interpolated data</span></p>
</div>
<div class="section" id="complete-example-script">
<h2>Complete example script<a class="headerlink" href="#complete-example-script" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of clarity, the complete example script is shown below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataReaderSpam</span> <span class="kn">import</span> <span class="n">DataReaderSPAM</span>

<span class="c1"># read in spam data</span>
<span class="n">spamPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;timeData&quot;</span><span class="p">,</span> <span class="s2">&quot;spam&quot;</span><span class="p">)</span>
<span class="n">spamReader</span> <span class="o">=</span> <span class="n">DataReaderSPAM</span><span class="p">(</span><span class="n">spamPath</span><span class="p">)</span>
<span class="n">spamReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">spamData</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getPhysicalSamples</span><span class="p">()</span>
<span class="n">spamData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># interpolate to second</span>
<span class="kn">from</span> <span class="nn">resistics.utilities.utilsInterp</span> <span class="kn">import</span> <span class="n">interpolateToSecond</span>

<span class="n">interpData</span> <span class="o">=</span> <span class="n">interpolateToSecond</span><span class="p">(</span><span class="n">spamData</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">interpData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># can now write out the interpolated dataset</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataWriterInternal</span> <span class="kn">import</span> <span class="n">DataWriterInternal</span>

<span class="n">interpPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;timeData&quot;</span><span class="p">,</span> <span class="s2">&quot;spamInterp&quot;</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">()</span>
<span class="n">chanHeaders</span><span class="p">,</span> <span class="n">chanMap</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getChanHeaders</span><span class="p">()</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">DataWriterInternal</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">interpPath</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span>
    <span class="n">headers</span><span class="p">,</span>
    <span class="n">chanHeaders</span><span class="p">,</span>
    <span class="n">interpData</span><span class="p">,</span>
    <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># read in the internal data</span>
<span class="kn">from</span> <span class="nn">resistics.ioHandlers.dataReaderInternal</span> <span class="kn">import</span> <span class="n">DataReaderInternal</span>

<span class="n">interpReader</span> <span class="o">=</span> <span class="n">DataReaderInternal</span><span class="p">(</span><span class="n">interpPath</span><span class="p">)</span>
<span class="n">interpReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">interpReader</span><span class="o">.</span><span class="n">printComments</span><span class="p">()</span>

<span class="c1"># get data between a time range</span>
<span class="n">startTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:10:00&quot;</span>
<span class="n">stopTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:30:00&quot;</span>
<span class="n">spamData</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">)</span>
<span class="n">interpData</span> <span class="o">=</span> <span class="n">interpReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">)</span>

<span class="c1"># plot the datasets</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">spamData</span><span class="o">.</span><span class="n">getDateArray</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="n">spamData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="s2">&quot;o--&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">interpData</span><span class="o">.</span><span class="n">getDateArray</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="n">interpData</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Ex&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">],</span> <span class="s2">&quot;x:&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Original&quot;</span><span class="p">,</span> <span class="s2">&quot;Interpolated&quot;</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;interpolation.png&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../calibration.html" class="btn btn-neutral float-right" title="Calibration data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="internal-binary-format.html" class="btn btn-neutral float-left" title="Internal binary format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Neeraj Shah

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>