

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SPAM timeseries &mdash; resistics 0.0.6.dev3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lemi B423 timeseries" href="LemiB423-timeseries.html" />
    <link rel="prev" title="ATS timeseries" href="ATS-timeseries.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html"> resistics
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../formats.html">Data formats</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../timeseries.html">Timeseries data</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ATS-timeseries.html">ATS timeseries</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SPAM timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="LemiB423-timeseries.html">Lemi B423 timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="Phoenix-timeseries.html">Phoenix timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="ascii-timeseries.html">ASCII timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal-binary-format.html">Internal binary format</a></li>
<li class="toctree-l3"><a class="reference internal" href="interpolation-to-second.html">Interpolation to second</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../calibration.html">Calibration data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../case-studies.html">Case studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog / backlog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate.html">Donate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">resistics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">resistics</a> &raquo;</li>
        
          <li><a href="../../formats.html">Data formats</a> &raquo;</li>
        
          <li><a href="../timeseries.html">Timeseries data</a> &raquo;</li>
        
      <li>SPAM timeseries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/formats/timeseries/SPAM-timeseries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="spam-timeseries">
<h1>SPAM timeseries<a class="headerlink" href="#spam-timeseries" title="Permalink to this headline">¶</a></h1>
<p>SPAM recordings are more complex than ATS recordings. Continuous recordings can either be stored in a single data file or multiple smaller data files. All channels are in the same data file.</p>
<p>Therefore, a typical SPAM data directory can look like this,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>run01
├── 0996_LP00100Hz_HP00000s_R016_W038.XTR
└── 0996_LP00100Hz_HP00000s_R016_W038.RAW
</pre></div>
</div>
<p>or this,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>run02
├── 0996_LP00100Hz_HP00000s_R016_W079.XTR
├── 0996_LP00100Hz_HP00000s_R016_W079.RAW
├── 0996_LP00100Hz_HP00000s_R016_W080.XTR
├── 0996_LP00100Hz_HP00000s_R016_W080.RAW
├── 0996_LP00100Hz_HP00000s_R016_W081.XTR
└── 0996_LP00100Hz_HP00000s_R016_W081.RAW
</pre></div>
</div>
<p>as long as together, the recordings are continuous and without gaps.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Resistics requires that each data folder represents a continuous recording without gaps. If gaps are encountered, resistics will quit execution and state where gaps were encountered.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In order for resistics to recognise a SPAM data folder, the following have to be present:</p>
<ul class="simple">
<li>A header file with extension .XTR or .XTRX</li>
<li>Data files with extension .RAW</li>
</ul>
<p class="last">Note that .XTRX headers are not yet supported. But where a .XTRX header is present, header information is read from the header of the binary data file.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Unscaled units for SPAM data are as follows:</p>
<ul class="simple">
<li>All channels are floats in mV</li>
</ul>
<p class="last">Raw SPAM timeseries data in the data files is in Volts. However, some scaling is applied to give “unscaled” data in mV. The reason for this is due to varying gains between SPAM data files, even when they together constitute a single continuous recording. Therefore, for the data to make sense as a single data source, gains are removed, leaving “unscaled” data in mV. When getting “physical” samples, electric channels are further divided by the electrode spacing in km.</p>
</div>
<p>SPAM recordings are opened in resistics using the <a class="reference internal" href="../../api/resistics.time.reader_spam.html#resistics.time.reader_spam.TimeReaderSPAM" title="resistics.time.reader_spam.TimeReaderSPAM"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeReaderSPAM</span></code></a> class. An example is provided below:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datapaths</span> <span class="kn">import</span> <span class="n">timePath</span><span class="p">,</span> <span class="n">timeImages</span>
<span class="kn">from</span> <span class="nn">resistics.time.reader_spam</span> <span class="kn">import</span> <span class="n">TimeReaderSPAM</span>

<span class="c1"># read in spam data</span>
<span class="n">spamPath</span> <span class="o">=</span> <span class="n">timePath</span> <span class="o">/</span> <span class="s2">&quot;spam&quot;</span>
<span class="n">spamReader</span> <span class="o">=</span> <span class="n">TimeReaderSPAM</span><span class="p">(</span><span class="n">spamPath</span><span class="p">)</span>
<span class="n">spamReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><code class="code python docutils literal notranslate"><span class="name"><span class="pre">spamReader</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">printInfo</span></span><span class="punctuation"><span class="pre">()</span></span></code> prints the measurement information out to the terminal and displays various recording parameters.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span>13:51:34 DataReaderSPAM: ####################
13:51:34 DataReaderSPAM: DATAREADERSPAM INFO BEGIN
13:51:34 DataReaderSPAM: ####################
13:51:34 DataReaderSPAM: Data Path = timeData\spam
13:51:34 DataReaderSPAM: Global Headers
13:51:34 DataReaderSPAM: {&#39;sample_freq&#39;: 250.0, &#39;start_date&#39;: &#39;2016-02-07&#39;, &#39;start_time&#39;: &#39;00:00:00.003200&#39;, &#39;stop_date&#39;: &#39;2016-02-07&#39;, &#39;stop_time&#39;: &#39;23:59:59.999200&#39;, &#39;num_samples&#39;: 21600000, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;meas_channels&#39;: 4}
13:51:34 DataReaderSPAM: Channels found:
13:51:34 DataReaderSPAM: [&#39;Hx&#39;, &#39;Hy&#39;, &#39;Ex&#39;, &#39;Ey&#39;]
13:51:34 DataReaderSPAM: Channel Map
13:51:34 DataReaderSPAM: {&#39;Hx&#39;: 0, &#39;Hy&#39;: 1, &#39;Ex&#39;: 2, &#39;Ey&#39;: 3}
13:51:34 DataReaderSPAM: Channel Headers
13:51:34 DataReaderSPAM: Hx
13:51:34 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 1, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;MFS06&#39;, &#39;channel_type&#39;: &#39;Hx&#39;, &#39;ts_lsb&#39;: -1000.0, &#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 0.0, &#39;pos_x2&#39;: 0.0, &#39;pos_y1&#39;: 0.0, &#39;pos_y2&#39;: 0.0, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 133, &#39;sample_freq&#39;: 250.0}
13:51:34 DataReaderSPAM: Hy
13:51:34 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 1, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;MFS06&#39;, &#39;channel_type&#39;: &#39;Hy&#39;, &#39;ts_lsb&#39;: -1000.0, &#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 0.0, &#39;pos_x2&#39;: 0.0, &#39;pos_y1&#39;: 0.0, &#39;pos_y2&#39;: 0.0, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 135, &#39;sample_freq&#39;: 250.0}
13:51:34 DataReaderSPAM: Ex
13:51:34 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 0, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;ELC00&#39;, &#39;channel_type&#39;: &#39;Ex&#39;, &#39;ts_lsb&#39;: -1000.0, &#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 29.35, &#39;pos_x2&#39;: 29.35, &#39;pos_y1&#39;: 0.0,&#39;pos_y2&#39;: 0.0, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 0, &#39;sample_freq&#39;: 250.0}
13:51:34 DataReaderSPAM: Ey
13:51:34 DataReaderSPAM: {&#39;gain_stage1&#39;: 1, &#39;gain_stage2&#39;: 1, &#39;hchopper&#39;: 0, &#39;echopper&#39;: 0, &#39;ats_data_file&#39;: &#39;0996_LP00100Hz_HP00000s_R016_W038.RAW&#39;, &#39;num_samples&#39;: 21600000, &#39;sensor_type&#39;: &#39;ELC00&#39;, &#39;channel_type&#39;: &#39;Ey&#39;, &#39;ts_lsb&#39;: -1000.0, &#39;scaling_applied&#39;: False, &#39;pos_x1&#39;: 0.0, &#39;pos_x2&#39;: 0.0, &#39;pos_y1&#39;: 28.2, &#39;pos_y2&#39;: 28.2, &#39;pos_z1&#39;: 0.0, &#39;pos_z2&#39;: 0.0, &#39;sensor_sernum&#39;: 0, &#39;sample_freq&#39;: 250.0}
13:51:34 DataReaderSPAM: Note: Field units used. Physical data has units mV/km for electric fields and mV for magnetic fields
13:51:34 DataReaderSPAM: Note: To get magnetic field in nT, please calibrate
13:51:34 DataReaderSPAM: ####################
13:51:34 DataReaderSPAM: DATAREADERSPAM INFO END
13:51:34 DataReaderSPAM: ####################
</pre></div>
</td></tr></table></div>
<p>This shows the headers read in by resistics and their values. There are both global headers, which apply to all the channels, and channel specific headers.</p>
<p>Resistics does not immediately load timeseries data into memory. In order to read the data from the files, it needs to be requested.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># get physical data from SPAM</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">startTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:10:00&quot;</span>
<span class="n">stopTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:30:00&quot;</span>
<span class="n">physicalSPAMData</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">,</span> <span class="n">remnans</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">numChans</span><span class="p">))</span>
<span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">timeImages</span> <span class="o">/</span> <span class="s2">&quot;spam.png&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p><code class="code python docutils literal notranslate"><span class="name"><span class="pre">spamReader</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">getPhysicalData</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name"><span class="pre">startTime</span></span><span class="punctuation"><span class="pre">,</span></span> <span class="name"><span class="pre">stopTime</span></span><span class="punctuation"><span class="pre">)</span></span></code> will read timeseries data from the data files and returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">TimeData</span></code> object with data in field units. Alternatively, to get all the data without any time restrictions, use the <a class="reference internal" href="../../api/resistics.time.reader_spam.html#resistics.time.reader_spam.TimeReaderSPAM.getPhysicalSamples" title="resistics.time.reader_spam.TimeReaderSPAM.getPhysicalSamples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getPhysicalSamples()</span></code></a> method. Information about the time data can be printed using either the <a class="reference internal" href="../../api/resistics.common.base.html#resistics.common.base.ResisticsBase.printInfo" title="resistics.common.base.ResisticsBase.printInfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">printInfo()</span></code></a> method or by simply printing a <a class="reference internal" href="../../api/resistics.time.data.html#resistics.time.data.TimeData" title="resistics.time.data.TimeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeData</span></code></a> object. An example of the time data information is below:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span>13:51:39 TimeData: ####################
13:51:39 TimeData: TIMEDATA INFO BEGIN
13:51:39 TimeData: ####################
13:51:39 TimeData: Sampling frequency [Hz] = 250.0
13:51:39 TimeData: Sample rate [s] = 0.004
13:51:39 TimeData: Number of samples = 300001
13:51:39 TimeData: Number of channels = 4
13:51:39 TimeData: Channels = [&#39;Ex&#39;, &#39;Ey&#39;, &#39;Hx&#39;, &#39;Hy&#39;]
13:51:39 TimeData: Start time = 2016-02-07 02:09:59.999200
13:51:39 TimeData: Stop time = 2016-02-07 02:29:59.999200
13:51:39 TimeData: Comments
13:51:39 TimeData:      Unscaled data 2016-02-07 02:09:59.999200 to 2016-02-07 02:29:59.999200 read in from measurement timeData\spam, samples 1949999 to 224999913:51:39 TimeData:      Data read from 1 files in total
13:51:39 TimeData:      Data scaled to mV for all channels using scalings in header files
13:51:39 TimeData:      Sampling frequency 250.0
13:51:39 TimeData:      Dividing channel Ex by electrode distance 0.0587 km to give mV/km
13:51:39 TimeData:      Dividing channel Ey by electrode distance 0.0564 km to give mV/km
13:51:39 TimeData:      Remove zeros: False, remove nans: False, remove average: True
13:51:39 TimeData: ####################
13:51:39 TimeData: TIMEDATA INFO END
13:51:39 TimeData: ####################
</pre></div>
</td></tr></table></div>
<p>After reading in some data, it is natural to view it. Time data can be viewed using the <a class="reference internal" href="../../api/resistics.time.data.html#resistics.time.data.TimeData.view" title="resistics.time.data.TimeData.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">view()</span></code></a> method of the class. By providing a matplotlib figure object to the call to view,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">2000</span><span class="p">),</span>
</pre></div>
</div>
<p>plots can be formatted in more detail. In this case, the figure size and layout is being set external of the view method.</p>
<div class="align-center figure" id="id1">
<img alt="alternate text" src="../../_images/spam.png" />
<p class="caption"><span class="caption-text">Viewing physical data</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>SPAM data can be converted to the internal data format using the <a class="reference internal" href="../../api/resistics.time.writer_internal.html#resistics.time.writer_internal.TimeWriterInternal" title="resistics.time.writer_internal.TimeWriterInternal"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeWriterInternal</span></code></a>. In nearly all cases, it is better to write out physical data.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># write out as the internal format</span>
<span class="kn">from</span> <span class="nn">resistics.time.writer_internal</span> <span class="kn">import</span> <span class="n">TimeWriterInternal</span>

<span class="n">spam_2internal</span> <span class="o">=</span> <span class="n">timePath</span> <span class="o">/</span> <span class="s2">&quot;spamInternal&quot;</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">TimeWriterInternal</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">spam_2internal</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeDataset</span><span class="p">(</span><span class="n">spamReader</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Data can be written out in unscaled format. However, each format applies different scalings when data is read in, so it is possible to write out unscaled samples in internal format and then upon reading, have it scaled incorrectly. Therefore, it is nearly always best to write out physical samples.</p>
</div>
<p>Writing out an internally formatted dataset will additionally write out a set of comments. These comments keep track of what has been done to the timeseries data and are there to improve repoducibility and traceability. Read more about comments <a class="reference internal" href="../../features/comments.html"><span class="doc">here</span></a>. The comments for this internally formatted dataset are:</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Unscaled data 2016-02-07 00:00:00.003200 to 2016-02-07 23:59:59.999200 read in from measurement E:\magnetotellurics\code\resisticsdata\formats\timeData\spam, samples 0 to 21599999
Data read from 1 files in total
Data scaled to mV for all channels using scalings in header files
Sampling frequency 250.0
Dividing channel Ex by electrode distance 0.0587 km to give mV/km
Dividing channel Ey by electrode distance 0.0564 km to give mV/km
Remove zeros: False, remove nans: False, remove average: True
Time series dataset written to E:\magnetotellurics\code\resisticsdata\formats\timeData\spamInternal on 2019-10-05 18:15:12.126676 using resistics 0.0.6.dev2
---------------------------------------------------
</pre></div>
</td></tr></table></div>
<p>The internal format data can be read in and compared to the original data.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># read in the internal format dataset and see what&#39;s in the comments</span>
<span class="kn">from</span> <span class="nn">resistics.time.reader_internal</span> <span class="kn">import</span> <span class="n">TimeReaderInternal</span>

<span class="n">internalReader</span> <span class="o">=</span> <span class="n">TimeReaderInternal</span><span class="p">(</span><span class="n">spam_2internal</span><span class="p">)</span>
<span class="n">internalReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">internalReader</span><span class="o">.</span><span class="n">printComments</span><span class="p">()</span>
<span class="n">physicalInternalData</span> <span class="o">=</span> <span class="n">internalReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">)</span>
<span class="n">physicalInternalData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># now plot the two datasets together</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">numChans</span><span class="p">))</span>
<span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;SPAM format&quot;</span><span class="p">)</span>
<span class="n">physicalInternalData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Internal format&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">timeImages</span> <span class="o">/</span> <span class="s2">&quot;spam_vs_internal.png&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id2">
<img alt="alternate text" src="../../_images/spam_vs_internal.png" />
<p class="caption"><span class="caption-text">Original SPAM data versus the internally formatted data</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>There are a few helpful methods built in to resistics for manipulating timeseries data. These are generally in <a class="reference internal" href="../../api/resistics.time.html#module-resistics.time" title="resistics.time"><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code></a>. In the example below, the time data is band pass filtered between 0.2 Hz and 16 Hz.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>47
48
49
50
51</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># all we see is 50Hz and 16Hz noise - apply a band pass filter</span>
<span class="kn">from</span> <span class="nn">resistics.time.filter</span> <span class="kn">import</span> <span class="n">bandPass</span>

<span class="n">filteredSPAMData</span> <span class="o">=</span> <span class="n">bandPass</span><span class="p">(</span><span class="n">physicalSPAMData</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">filteredSPAMData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Printing the new time data information using <code class="code python docutils literal notranslate"><span class="name"><span class="pre">filteredSPAMData</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">printInfo</span></span><span class="punctuation"><span class="pre">()</span></span></code> now includes the application of the filter in the time data comments.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span>14:28:39 TimeData: ####################
14:28:39 TimeData: TIMEDATA INFO BEGIN
14:28:39 TimeData: ####################
14:28:39 TimeData: Sampling frequency [Hz] = 250.0
14:28:39 TimeData: Sample rate [s] = 0.004
14:28:39 TimeData: Number of samples = 300001
14:28:39 TimeData: Number of channels = 4
14:28:39 TimeData: Channels = [&#39;Ex&#39;, &#39;Ey&#39;, &#39;Hx&#39;, &#39;Hy&#39;]
14:28:39 TimeData: Start time = 2016-02-07 02:09:59.999200
14:28:39 TimeData: Stop time = 2016-02-07 02:29:59.999200
14:28:39 TimeData: Comments
14:28:39 TimeData:      Unscaled data 2016-02-07 02:09:59.999200 to 2016-02-07 02:29:59.999200 read in from measurement timeData\spam, samples 1949999 to 2249999
14:28:39 TimeData:      Data read from 1 files in total
14:28:39 TimeData:      Data scaled to mV for all channels using scalings in header files
14:28:39 TimeData:      Sampling frequency 250.0
14:28:39 TimeData:      Dividing channel Ex by electrode distance 0.0587 km to give mV/km
14:28:39 TimeData:      Dividing channel Ey by electrode distance 0.0564 km to give mV/km
14:28:39 TimeData:      Remove zeros: False, remove nans: False, remove average: True
14:28:39 TimeData:      Band pass filter applied with cutoffs 0.2 Hz and 16 Hz
14:28:39 TimeData: ####################
14:28:39 TimeData: TIMEDATA INFO END
14:28:39 TimeData: ####################
</pre></div>
</td></tr></table></div>
<p>It is possible to write out a modified time data object in internal (or ASCII) format. To do this, instead of using,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span><span class="o">.</span><span class="n">writeDataset</span><span class="p">(</span><span class="n">spamReader</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>which writes out a whole dataset given a <a class="reference internal" href="../../api/resistics.time.reader.html#resistics.time.reader.TimeReader" title="resistics.time.reader.TimeReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeReader</span></code></a> object, use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span><span class="n">spamReader</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">(),</span> <span class="n">chanHeaders</span><span class="p">,</span> <span class="n">filteredSPAMData</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>to write out a <code class="xref py py-class docutils literal notranslate"><span class="pre">dataTimeData</span></code> object directly. Header information needs to be explicitly passed to this function. For more information, see the example below and <code class="xref py py-class docutils literal notranslate"><span class="pre">TimeWriter&gt;</span></code>. In the below example, the filtered time data is written out.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>53
54
55
56
57</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># write out a filtered data - this is a subset of the data</span>
<span class="n">spam_2filteredSubset</span> <span class="o">=</span> <span class="n">timePath</span> <span class="o">/</span> <span class="s2">&quot;spamInternalFiltered&quot;</span>
<span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">spam_2filteredSubset</span><span class="p">)</span>
<span class="n">chanHeaders</span><span class="p">,</span> <span class="n">chanMap</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getChanHeaders</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span><span class="n">spamReader</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">(),</span> <span class="n">chanHeaders</span><span class="p">,</span> <span class="n">filteredSPAMData</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Opening the comments file for the newly written dataset, it can be seen that a line has been added which records the application of a filter to the dataset.</p>
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Unscaled data 2016-02-07 02:09:59.999200 to 2016-02-07 02:29:59.999200 read in from measurement E:\magnetotellurics\code\resisticsdata\formats\timeData\spam, samples 1949999 to 2249999
Data read from 1 files in total
Data scaled to mV for all channels using scalings in header files
Sampling frequency 250.0
Dividing channel Ex by electrode distance 0.0587 km to give mV/km
Dividing channel Ey by electrode distance 0.0564 km to give mV/km
Remove zeros: False, remove nans: True, remove average: True
Band pass filter applied with cutoffs 0.2 Hz and 16 Hz
Time series dataset written to E:\magnetotellurics\code\resisticsdata\formats\timeData\spamInternalFiltered on 2019-10-05 18:15:29.301430 using resistics 0.0.6.dev2
---------------------------------------------------
</pre></div>
</td></tr></table></div>
<p>Finally, to check everything is fine with the new dataset, the internal formatted  filtered dataset can be read in and the data compared to the original filtered time data.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s try reading in again</span>
<span class="n">internalReaderFiltered</span> <span class="o">=</span> <span class="n">TimeReaderInternal</span><span class="p">(</span><span class="n">spam_2filteredSubset</span><span class="p">)</span>
<span class="n">internalReaderFiltered</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">internalReaderFiltered</span><span class="o">.</span><span class="n">printComments</span><span class="p">()</span>

<span class="c1"># get the internal formatted filtered data</span>
<span class="n">filteredInternalData</span> <span class="o">=</span> <span class="n">internalReaderFiltered</span><span class="o">.</span><span class="n">getPhysicalSamples</span><span class="p">()</span>
<span class="n">filteredInternalData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># plot this against the original</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">numChans</span><span class="p">))</span>
<span class="n">filteredSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;filtered SPAM format&quot;</span><span class="p">)</span>
<span class="n">filteredInternalData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span>
    <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;filtered internal format&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">timeImages</span> <span class="o">/</span> <span class="s2">&quot;spam_vs_internal_filtered.png&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Plotting the two time data objects on the same plot results in the image below.</p>
<div class="align-center figure" id="id3">
<img alt="alternate text" src="../../_images/spam_vs_internal_filtered.png" />
<p class="caption"><span class="caption-text">Filtered SPAM data versus the internally formatted filtered data</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="complete-example-script">
<h2>Complete example script<a class="headerlink" href="#complete-example-script" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of clarity, the complete example script is shown below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datapaths</span> <span class="kn">import</span> <span class="n">timePath</span><span class="p">,</span> <span class="n">timeImages</span>
<span class="kn">from</span> <span class="nn">resistics.time.reader_spam</span> <span class="kn">import</span> <span class="n">TimeReaderSPAM</span>

<span class="c1"># read in spam data</span>
<span class="n">spamPath</span> <span class="o">=</span> <span class="n">timePath</span> <span class="o">/</span> <span class="s2">&quot;spam&quot;</span>
<span class="n">spamReader</span> <span class="o">=</span> <span class="n">TimeReaderSPAM</span><span class="p">(</span><span class="n">spamPath</span><span class="p">)</span>
<span class="n">spamReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># get physical data from SPAM</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">startTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:10:00&quot;</span>
<span class="n">stopTime</span> <span class="o">=</span> <span class="s2">&quot;2016-02-07 02:30:00&quot;</span>
<span class="n">physicalSPAMData</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">,</span> <span class="n">remnans</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">numChans</span><span class="p">))</span>
<span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">timeImages</span> <span class="o">/</span> <span class="s2">&quot;spam.png&quot;</span><span class="p">)</span>

<span class="c1"># write out as the internal format</span>
<span class="kn">from</span> <span class="nn">resistics.time.writer_internal</span> <span class="kn">import</span> <span class="n">TimeWriterInternal</span>

<span class="n">spam_2internal</span> <span class="o">=</span> <span class="n">timePath</span> <span class="o">/</span> <span class="s2">&quot;spamInternal&quot;</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">TimeWriterInternal</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">spam_2internal</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeDataset</span><span class="p">(</span><span class="n">spamReader</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># read in the internal format dataset and see what&#39;s in the comments</span>
<span class="kn">from</span> <span class="nn">resistics.time.reader_internal</span> <span class="kn">import</span> <span class="n">TimeReaderInternal</span>

<span class="n">internalReader</span> <span class="o">=</span> <span class="n">TimeReaderInternal</span><span class="p">(</span><span class="n">spam_2internal</span><span class="p">)</span>
<span class="n">internalReader</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">internalReader</span><span class="o">.</span><span class="n">printComments</span><span class="p">()</span>
<span class="n">physicalInternalData</span> <span class="o">=</span> <span class="n">internalReader</span><span class="o">.</span><span class="n">getPhysicalData</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span> <span class="n">stopTime</span><span class="p">)</span>
<span class="n">physicalInternalData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># now plot the two datasets together</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">numChans</span><span class="p">))</span>
<span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;SPAM format&quot;</span><span class="p">)</span>
<span class="n">physicalInternalData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Internal format&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">timeImages</span> <span class="o">/</span> <span class="s2">&quot;spam_vs_internal.png&quot;</span><span class="p">)</span>

<span class="c1"># all we see is 50Hz and 16Hz noise - apply a band pass filter</span>
<span class="kn">from</span> <span class="nn">resistics.time.filter</span> <span class="kn">import</span> <span class="n">bandPass</span>

<span class="n">filteredSPAMData</span> <span class="o">=</span> <span class="n">bandPass</span><span class="p">(</span><span class="n">physicalSPAMData</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">filteredSPAMData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># write out a filtered data - this is a subset of the data</span>
<span class="n">spam_2filteredSubset</span> <span class="o">=</span> <span class="n">timePath</span> <span class="o">/</span> <span class="s2">&quot;spamInternalFiltered&quot;</span>
<span class="n">writer</span><span class="o">.</span><span class="n">setOutPath</span><span class="p">(</span><span class="n">spam_2filteredSubset</span><span class="p">)</span>
<span class="n">chanHeaders</span><span class="p">,</span> <span class="n">chanMap</span> <span class="o">=</span> <span class="n">spamReader</span><span class="o">.</span><span class="n">getChanHeaders</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeData</span><span class="p">(</span><span class="n">spamReader</span><span class="o">.</span><span class="n">getHeaders</span><span class="p">(),</span> <span class="n">chanHeaders</span><span class="p">,</span> <span class="n">filteredSPAMData</span><span class="p">,</span> <span class="n">physical</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># let&#39;s try reading in again</span>
<span class="n">internalReaderFiltered</span> <span class="o">=</span> <span class="n">TimeReaderInternal</span><span class="p">(</span><span class="n">spam_2filteredSubset</span><span class="p">)</span>
<span class="n">internalReaderFiltered</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>
<span class="n">internalReaderFiltered</span><span class="o">.</span><span class="n">printComments</span><span class="p">()</span>

<span class="c1"># get the internal formatted filtered data</span>
<span class="n">filteredInternalData</span> <span class="o">=</span> <span class="n">internalReaderFiltered</span><span class="o">.</span><span class="n">getPhysicalSamples</span><span class="p">()</span>
<span class="n">filteredInternalData</span><span class="o">.</span><span class="n">printInfo</span><span class="p">()</span>

<span class="c1"># plot this against the original</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">physicalSPAMData</span><span class="o">.</span><span class="n">numChans</span><span class="p">))</span>
<span class="n">filteredSPAMData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;filtered SPAM format&quot;</span><span class="p">)</span>
<span class="n">filteredInternalData</span><span class="o">.</span><span class="n">view</span><span class="p">(</span>
    <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">sampleStop</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;filtered internal format&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">timeImages</span> <span class="o">/</span> <span class="s2">&quot;spam_vs_internal_filtered.png&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="LemiB423-timeseries.html" class="btn btn-neutral float-right" title="Lemi B423 timeseries" accesskey="n" rel="next">Next</a>
      
      
        <a href="ATS-timeseries.html" class="btn btn-neutral" title="ATS timeseries" accesskey="p" rel="prev">Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Neeraj Shah.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/unitedstack/sphinx_rtd_theme">theme</a> provided by <a href="https://github.com/unitedstack">UnitedStack</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.6.dev3',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>